var Rr=Object.defineProperty;var Or=(i,e,n)=>e in i?Rr(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Mn=(i,e,n)=>Or(i,typeof e!="symbol"?e+"":e,n);import{r as ut,c as on,a as Ft,o as St,b as We,t as or,n as Ir,w as sr,d as jt,e as Dr,u as Lr,f as Ur,g as Mr,h as Pr}from"./index-Ox0Kjtxo.js";import{E as Nr,V as je,M as Bt,T as Zt,S as gi,Q as vi,a as st,R as Fr,P as zr,b as Hr,D as Br,H as gn,F as Pn,c as Zr,L as bi,d as Gr,N as Vr,e as wi,f as yi,g as Vn,B as Wr,h as xi,i as jr,j as Yr,k as Qe,l as Xr,m as Ei,C as $r,n as Ci,W as Si,o as Kr,p as qr,q as Jr,G as Qr,r as ea,K as ta,s as na,t as ia,A as ra,u as aa,v as oa,w as sa,x as la,y as ca,z as ki,I as ua,J as da,O as fa,U as ha}from"./meshopt_decoder.module-9vCzl4qF.js";var sn=function(){var i=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(v){v.preventDefault(),t(++i%e.children.length)},!1);function n(v){return e.appendChild(v.dom),v}function t(v){for(var b=0;b<e.children.length;b++)e.children[b].style.display=b===v?"block":"none";i=v}var r=(performance||Date).now(),a=r,l=0,c=n(new sn.Panel("FPS","#0ff","#002")),h=n(new sn.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var g=n(new sn.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){l++;var v=(performance||Date).now();if(h.update(v-r,200),v>=a+1e3&&(c.update(l*1e3/(v-a),100),a=v,l=0,g)){var b=performance.memory;g.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return v},update:function(){r=this.end()},domElement:e,setMode:t}};sn.Panel=function(i,e,n){var t=1/0,r=0,a=Math.round,l=a(window.devicePixelRatio||1),c=80*l,h=48*l,g=3*l,v=2*l,b=3*l,C=15*l,I=74*l,f=30*l,y=document.createElement("canvas");y.width=c,y.height=h,y.style.cssText="width:80px;height:48px";var s=y.getContext("2d");return s.font="bold "+9*l+"px Helvetica,Arial,sans-serif",s.textBaseline="top",s.fillStyle=n,s.fillRect(0,0,c,h),s.fillStyle=e,s.fillText(i,g,v),s.fillRect(b,C,I,f),s.fillStyle=n,s.globalAlpha=.9,s.fillRect(b,C,I,f),{dom:y,update:function(d,x){t=Math.min(t,d),r=Math.max(r,d),s.fillStyle=n,s.globalAlpha=1,s.fillRect(0,0,c,C),s.fillStyle=e,s.fillText(a(d)+" "+i+" ("+a(t)+"-"+a(r)+")",g,v),s.drawImage(y,b+l,C,I-l,f,b,C,I-l,f),s.fillRect(b+I-l,C,l,f),s.fillStyle=n,s.globalAlpha=.9,s.fillRect(b+I-l,C,l,a((1-d/x)*f))}}};const Ai={type:"change"},Nn={type:"start"},Ti={type:"end"},vn=new Fr,Ri=new zr,pa=Math.cos(70*Hr.DEG2RAD);class _a extends Nr{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new je,this.cursor=new je,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Bt.ROTATE,MIDDLE:Bt.DOLLY,RIGHT:Bt.PAN},this.touches={ONE:Zt.ROTATE,TWO:Zt.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(p){p.addEventListener("keydown",B),this._domElementKeyEvents=p},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",B),this._domElementKeyEvents=null},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(Ai),t.update(),a=r.NONE},this.update=(function(){const p=new je,K=new vi().setFromUnitVectors(e.up,new je(0,1,0)),M=K.clone().invert(),we=new je,Ze=new vi,ht=new je,$e=2*Math.PI;return function(Un=null){const pn=t.object.position;p.copy(pn).sub(t.target),p.applyQuaternion(K),c.setFromVector3(p),t.autoRotate&&a===r.NONE&&D(z(Un)),t.enableDamping?(c.theta+=h.theta*t.dampingFactor,c.phi+=h.phi*t.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let rt=t.minAzimuthAngle,at=t.maxAzimuthAngle;isFinite(rt)&&isFinite(at)&&(rt<-Math.PI?rt+=$e:rt>Math.PI&&(rt-=$e),at<-Math.PI?at+=$e:at>Math.PI&&(at-=$e),rt<=at?c.theta=Math.max(rt,Math.min(at,c.theta)):c.theta=c.theta>(rt+at)/2?Math.max(rt,c.theta):Math.min(at,c.theta)),c.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,c.phi)),c.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(v,t.dampingFactor):t.target.add(v),t.target.sub(t.cursor),t.target.clampLength(t.minTargetRadius,t.maxTargetRadius),t.target.add(t.cursor);let Pt=!1;if(t.zoomToCursor&&S||t.object.isOrthographicCamera)c.radius=ee(c.radius);else{const ot=c.radius;c.radius=ee(c.radius*g),Pt=ot!=c.radius}if(p.setFromSpherical(c),p.applyQuaternion(M),pn.copy(t.target).add(p),t.object.lookAt(t.target),t.enableDamping===!0?(h.theta*=1-t.dampingFactor,h.phi*=1-t.dampingFactor,v.multiplyScalar(1-t.dampingFactor)):(h.set(0,0,0),v.set(0,0,0)),t.zoomToCursor&&S){let ot=null;if(t.object.isPerspectiveCamera){const Nt=p.length();ot=ee(Nt*g);const bt=Nt-ot;t.object.position.addScaledVector(m,bt),t.object.updateMatrixWorld(),Pt=!!bt}else if(t.object.isOrthographicCamera){const Nt=new je(R.x,R.y,0);Nt.unproject(t.object);const bt=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/g)),t.object.updateProjectionMatrix(),Pt=bt!==t.object.zoom;const _n=new je(R.x,R.y,0);_n.unproject(t.object),t.object.position.sub(_n).add(Nt),t.object.updateMatrixWorld(),ot=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;ot!==null&&(this.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(ot).add(t.object.position):(vn.origin.copy(t.object.position),vn.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(vn.direction))<pa?e.lookAt(t.target):(Ri.setFromNormalAndCoplanarPoint(t.object.up,t.target),vn.intersectPlane(Ri,t.target))))}else if(t.object.isOrthographicCamera){const ot=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/g)),ot!==t.object.zoom&&(t.object.updateProjectionMatrix(),Pt=!0)}return g=1,S=!1,Pt||we.distanceToSquared(t.object.position)>l||8*(1-Ze.dot(t.object.quaternion))>l||ht.distanceToSquared(t.target)>l?(t.dispatchEvent(Ai),we.copy(t.object.position),Ze.copy(t.object.quaternion),ht.copy(t.target),!0):!1}})(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",fe),t.domElement.removeEventListener("pointerdown",Lt),t.domElement.removeEventListener("pointercancel",Ve),t.domElement.removeEventListener("wheel",V),t.domElement.removeEventListener("pointermove",xt),t.domElement.removeEventListener("pointerup",Ve),t.domElement.getRootNode().removeEventListener("keydown",$,{capture:!0}),t._domElementKeyEvents!==null&&(t._domElementKeyEvents.removeEventListener("keydown",B),t._domElementKeyEvents=null)};const t=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=r.NONE;const l=1e-6,c=new gi,h=new gi;let g=1;const v=new je,b=new st,C=new st,I=new st,f=new st,y=new st,s=new st,d=new st,x=new st,w=new st,m=new je,R=new st;let S=!1;const E=[],U={};let q=!1;function z(p){return p!==null?2*Math.PI/60*t.autoRotateSpeed*p:2*Math.PI/60/60*t.autoRotateSpeed}function N(p){const K=Math.abs(p*.01);return Math.pow(.95,t.zoomSpeed*K)}function D(p){h.theta-=p}function j(p){h.phi-=p}const Q=(function(){const p=new je;return function(M,we){p.setFromMatrixColumn(we,0),p.multiplyScalar(-M),v.add(p)}})(),ae=(function(){const p=new je;return function(M,we){t.screenSpacePanning===!0?p.setFromMatrixColumn(we,1):(p.setFromMatrixColumn(we,0),p.crossVectors(t.object.up,p)),p.multiplyScalar(M),v.add(p)}})(),Y=(function(){const p=new je;return function(M,we){const Ze=t.domElement;if(t.object.isPerspectiveCamera){const ht=t.object.position;p.copy(ht).sub(t.target);let $e=p.length();$e*=Math.tan(t.object.fov/2*Math.PI/180),Q(2*M*$e/Ze.clientHeight,t.object.matrix),ae(2*we*$e/Ze.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(Q(M*(t.object.right-t.object.left)/t.object.zoom/Ze.clientWidth,t.object.matrix),ae(we*(t.object.top-t.object.bottom)/t.object.zoom/Ze.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function ve(p){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?g/=p:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Le(p){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?g*=p:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Ee(p,K){if(!t.zoomToCursor)return;S=!0;const M=t.domElement.getBoundingClientRect(),we=p-M.left,Ze=K-M.top,ht=M.width,$e=M.height;R.x=we/ht*2-1,R.y=-(Ze/$e)*2+1,m.set(R.x,R.y,1).unproject(t.object).sub(t.object.position).normalize()}function ee(p){return Math.max(t.minDistance,Math.min(t.maxDistance,p))}function Pe(p){b.set(p.clientX,p.clientY)}function le(p){Ee(p.clientX,p.clientX),d.set(p.clientX,p.clientY)}function ue(p){f.set(p.clientX,p.clientY)}function Ae(p){C.set(p.clientX,p.clientY),I.subVectors(C,b).multiplyScalar(t.rotateSpeed);const K=t.domElement;D(2*Math.PI*I.x/K.clientHeight),j(2*Math.PI*I.y/K.clientHeight),b.copy(C),t.update()}function oe(p){x.set(p.clientX,p.clientY),w.subVectors(x,d),w.y>0?ve(N(w.y)):w.y<0&&Le(N(w.y)),d.copy(x),t.update()}function _e(p){y.set(p.clientX,p.clientY),s.subVectors(y,f).multiplyScalar(t.panSpeed),Y(s.x,s.y),f.copy(y),t.update()}function He(p){Ee(p.clientX,p.clientY),p.deltaY<0?Le(N(p.deltaY)):p.deltaY>0&&ve(N(p.deltaY)),t.update()}function Ye(p){let K=!1;switch(p.code){case t.keys.UP:p.ctrlKey||p.metaKey||p.shiftKey?j(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):Y(0,t.keyPanSpeed),K=!0;break;case t.keys.BOTTOM:p.ctrlKey||p.metaKey||p.shiftKey?j(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):Y(0,-t.keyPanSpeed),K=!0;break;case t.keys.LEFT:p.ctrlKey||p.metaKey||p.shiftKey?D(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):Y(t.keyPanSpeed,0),K=!0;break;case t.keys.RIGHT:p.ctrlKey||p.metaKey||p.shiftKey?D(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):Y(-t.keyPanSpeed,0),K=!0;break}K&&(p.preventDefault(),t.update())}function Ot(p){if(E.length===1)b.set(p.pageX,p.pageY);else{const K=Ke(p),M=.5*(p.pageX+K.x),we=.5*(p.pageY+K.y);b.set(M,we)}}function It(p){if(E.length===1)f.set(p.pageX,p.pageY);else{const K=Ke(p),M=.5*(p.pageX+K.x),we=.5*(p.pageY+K.y);f.set(M,we)}}function tt(p){const K=Ke(p),M=p.pageX-K.x,we=p.pageY-K.y,Ze=Math.sqrt(M*M+we*we);d.set(0,Ze)}function gt(p){t.enableZoom&&tt(p),t.enablePan&&It(p)}function Ue(p){t.enableZoom&&tt(p),t.enableRotate&&Ot(p)}function Be(p){if(E.length==1)C.set(p.pageX,p.pageY);else{const M=Ke(p),we=.5*(p.pageX+M.x),Ze=.5*(p.pageY+M.y);C.set(we,Ze)}I.subVectors(C,b).multiplyScalar(t.rotateSpeed);const K=t.domElement;D(2*Math.PI*I.x/K.clientHeight),j(2*Math.PI*I.y/K.clientHeight),b.copy(C)}function yt(p){if(E.length===1)y.set(p.pageX,p.pageY);else{const K=Ke(p),M=.5*(p.pageX+K.x),we=.5*(p.pageY+K.y);y.set(M,we)}s.subVectors(y,f).multiplyScalar(t.panSpeed),Y(s.x,s.y),f.copy(y)}function Dt(p){const K=Ke(p),M=p.pageX-K.x,we=p.pageY-K.y,Ze=Math.sqrt(M*M+we*we);x.set(0,Ze),w.set(0,Math.pow(x.y/d.y,t.zoomSpeed)),ve(w.y),d.copy(x);const ht=(p.pageX+K.x)*.5,$e=(p.pageY+K.y)*.5;Ee(ht,$e)}function vt(p){t.enableZoom&&Dt(p),t.enablePan&&yt(p)}function Ht(p){t.enableZoom&&Dt(p),t.enableRotate&&Be(p)}function Lt(p){t.enabled!==!1&&(E.length===0&&(t.domElement.setPointerCapture(p.pointerId),t.domElement.addEventListener("pointermove",xt),t.domElement.addEventListener("pointerup",Ve)),!he(p)&&(me(p),p.pointerType==="touch"?ie(p):Ut(p)))}function xt(p){t.enabled!==!1&&(p.pointerType==="touch"?ce(p):Mt(p))}function Ve(p){switch(xe(p),E.length){case 0:t.domElement.releasePointerCapture(p.pointerId),t.domElement.removeEventListener("pointermove",xt),t.domElement.removeEventListener("pointerup",Ve),t.dispatchEvent(Ti),a=r.NONE;break;case 1:const K=E[0],M=U[K];ie({pointerId:K,pageX:M.x,pageY:M.y});break}}function Ut(p){let K;switch(p.button){case 0:K=t.mouseButtons.LEFT;break;case 1:K=t.mouseButtons.MIDDLE;break;case 2:K=t.mouseButtons.RIGHT;break;default:K=-1}switch(K){case Bt.DOLLY:if(t.enableZoom===!1)return;le(p),a=r.DOLLY;break;case Bt.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enablePan===!1)return;ue(p),a=r.PAN}else{if(t.enableRotate===!1)return;Pe(p),a=r.ROTATE}break;case Bt.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enableRotate===!1)return;Pe(p),a=r.ROTATE}else{if(t.enablePan===!1)return;ue(p),a=r.PAN}break;default:a=r.NONE}a!==r.NONE&&t.dispatchEvent(Nn)}function Mt(p){switch(a){case r.ROTATE:if(t.enableRotate===!1)return;Ae(p);break;case r.DOLLY:if(t.enableZoom===!1)return;oe(p);break;case r.PAN:if(t.enablePan===!1)return;_e(p);break}}function V(p){t.enabled===!1||t.enableZoom===!1||a!==r.NONE||(p.preventDefault(),t.dispatchEvent(Nn),He(H(p)),t.dispatchEvent(Ti))}function H(p){const K=p.deltaMode,M={clientX:p.clientX,clientY:p.clientY,deltaY:p.deltaY};switch(K){case 1:M.deltaY*=16;break;case 2:M.deltaY*=100;break}return p.ctrlKey&&!q&&(M.deltaY*=10),M}function $(p){p.key==="Control"&&(q=!0,t.domElement.getRootNode().addEventListener("keyup",X,{passive:!0,capture:!0}))}function X(p){p.key==="Control"&&(q=!1,t.domElement.getRootNode().removeEventListener("keyup",X,{passive:!0,capture:!0}))}function B(p){t.enabled===!1||t.enablePan===!1||Ye(p)}function ie(p){switch(Xe(p),E.length){case 1:switch(t.touches.ONE){case Zt.ROTATE:if(t.enableRotate===!1)return;Ot(p),a=r.TOUCH_ROTATE;break;case Zt.PAN:if(t.enablePan===!1)return;It(p),a=r.TOUCH_PAN;break;default:a=r.NONE}break;case 2:switch(t.touches.TWO){case Zt.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;gt(p),a=r.TOUCH_DOLLY_PAN;break;case Zt.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Ue(p),a=r.TOUCH_DOLLY_ROTATE;break;default:a=r.NONE}break;default:a=r.NONE}a!==r.NONE&&t.dispatchEvent(Nn)}function ce(p){switch(Xe(p),a){case r.TOUCH_ROTATE:if(t.enableRotate===!1)return;Be(p),t.update();break;case r.TOUCH_PAN:if(t.enablePan===!1)return;yt(p),t.update();break;case r.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;vt(p),t.update();break;case r.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Ht(p),t.update();break;default:a=r.NONE}}function fe(p){t.enabled!==!1&&p.preventDefault()}function me(p){E.push(p.pointerId)}function xe(p){delete U[p.pointerId];for(let K=0;K<E.length;K++)if(E[K]==p.pointerId){E.splice(K,1);return}}function he(p){for(let K=0;K<E.length;K++)if(E[K]==p.pointerId)return!0;return!1}function Xe(p){let K=U[p.pointerId];K===void 0&&(K=new st,U[p.pointerId]=K),K.set(p.pageX,p.pageY)}function Ke(p){const K=p.pointerId===E[0]?E[1]:E[0];return U[K]}t.domElement.addEventListener("contextmenu",fe),t.domElement.addEventListener("pointerdown",Lt),t.domElement.addEventListener("pointercancel",Ve),t.domElement.addEventListener("wheel",V,{passive:!1}),t.domElement.getRootNode().addEventListener("keydown",$,{passive:!0,capture:!0}),this.update()}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var Oi=function(i){return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))};try{URL.revokeObjectURL(Oi(""))}catch{Oi=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var it=Uint8Array,kt=Uint16Array,Wn=Uint32Array,lr=new it([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cr=new it([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ma=new it([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ur=function(i,e){for(var n=new kt(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new Wn(n[30]),t=1;t<30;++t)for(var a=n[t];a<n[t+1];++a)r[a]=a-n[t]<<5|t;return[n,r]},dr=ur(lr,2),fr=dr[0],ga=dr[1];fr[28]=258,ga[258]=28;var va=ur(cr,0),ba=va[0],jn=new kt(32768);for(var Oe=0;Oe<32768;++Oe){var Et=(Oe&43690)>>>1|(Oe&21845)<<1;Et=(Et&52428)>>>2|(Et&13107)<<2,Et=(Et&61680)>>>4|(Et&3855)<<4,jn[Oe]=((Et&65280)>>>8|(Et&255)<<8)>>>1}var ln=(function(i,e,n){for(var t=i.length,r=0,a=new kt(e);r<t;++r)++a[i[r]-1];var l=new kt(e);for(r=0;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var c;if(n){c=new kt(1<<e);var h=15-e;for(r=0;r<t;++r)if(i[r])for(var g=r<<4|i[r],v=e-i[r],b=l[i[r]-1]++<<v,C=b|(1<<v)-1;b<=C;++b)c[jn[b]>>>h]=g}else for(c=new kt(t),r=0;r<t;++r)i[r]&&(c[r]=jn[l[i[r]-1]++]>>>15-i[r]);return c}),hn=new it(288);for(var Oe=0;Oe<144;++Oe)hn[Oe]=8;for(var Oe=144;Oe<256;++Oe)hn[Oe]=9;for(var Oe=256;Oe<280;++Oe)hn[Oe]=7;for(var Oe=280;Oe<288;++Oe)hn[Oe]=8;var hr=new it(32);for(var Oe=0;Oe<32;++Oe)hr[Oe]=5;var wa=ln(hn,9,1),ya=ln(hr,5,1),Fn=function(i){for(var e=i[0],n=1;n<i.length;++n)i[n]>e&&(e=i[n]);return e},lt=function(i,e,n){var t=e/8|0;return(i[t]|i[t+1]<<8)>>(e&7)&n},zn=function(i,e){var n=e/8|0;return(i[n]|i[n+1]<<8|i[n+2]<<16)>>(e&7)},xa=function(i){return(i/8|0)+(i&7&&1)},Ea=function(i,e,n){(n==null||n>i.length)&&(n=i.length);var t=new(i instanceof kt?kt:i instanceof Wn?Wn:it)(n-e);return t.set(i.subarray(e,n)),t},Ca=function(i,e,n){var t=i.length;if(!t||n&&!n.l&&t<5)return e||new it(0);var r=!e||n,a=!n||n.i;n||(n={}),e||(e=new it(t*3));var l=function(_e){var He=e.length;if(_e>He){var Ye=new it(Math.max(He*2,_e));Ye.set(e),e=Ye}},c=n.f||0,h=n.p||0,g=n.b||0,v=n.l,b=n.d,C=n.m,I=n.n,f=t*8;do{if(!v){n.f=c=lt(i,h,1);var y=lt(i,h+1,3);if(h+=3,y)if(y==1)v=wa,b=ya,C=9,I=5;else if(y==2){var w=lt(i,h,31)+257,m=lt(i,h+10,15)+4,R=w+lt(i,h+5,31)+1;h+=14;for(var S=new it(R),E=new it(19),U=0;U<m;++U)E[ma[U]]=lt(i,h+U*3,7);h+=m*3;for(var q=Fn(E),z=(1<<q)-1,N=ln(E,q,1),U=0;U<R;){var D=N[lt(i,h,z)];h+=D&15;var s=D>>>4;if(s<16)S[U++]=s;else{var j=0,Q=0;for(s==16?(Q=3+lt(i,h,3),h+=2,j=S[U-1]):s==17?(Q=3+lt(i,h,7),h+=3):s==18&&(Q=11+lt(i,h,127),h+=7);Q--;)S[U++]=j}}var ae=S.subarray(0,w),Y=S.subarray(w);C=Fn(ae),I=Fn(Y),v=ln(ae,C,1),b=ln(Y,I,1)}else throw"invalid block type";else{var s=xa(h)+4,d=i[s-4]|i[s-3]<<8,x=s+d;if(x>t){if(a)throw"unexpected EOF";break}r&&l(g+d),e.set(i.subarray(s,x),g),n.b=g+=d,n.p=h=x*8;continue}if(h>f){if(a)throw"unexpected EOF";break}}r&&l(g+131072);for(var ve=(1<<C)-1,Le=(1<<I)-1,Ee=h;;Ee=h){var j=v[zn(i,h)&ve],ee=j>>>4;if(h+=j&15,h>f){if(a)throw"unexpected EOF";break}if(!j)throw"invalid length/literal";if(ee<256)e[g++]=ee;else if(ee==256){Ee=h,v=null;break}else{var Pe=ee-254;if(ee>264){var U=ee-257,le=lr[U];Pe=lt(i,h,(1<<le)-1)+fr[U],h+=le}var ue=b[zn(i,h)&Le],Ae=ue>>>4;if(!ue)throw"invalid distance";h+=ue&15;var Y=ba[Ae];if(Ae>3){var le=cr[Ae];Y+=zn(i,h)&(1<<le)-1,h+=le}if(h>f){if(a)throw"unexpected EOF";break}r&&l(g+131072);for(var oe=g+Pe;g<oe;g+=4)e[g]=e[g-Y],e[g+1]=e[g+1-Y],e[g+2]=e[g+2-Y],e[g+3]=e[g+3-Y];g=oe}}n.l=v,n.p=Ee,n.b=g,v&&(c=1,n.m=C,n.d=b,n.n=I)}while(!c);return g==e.length?e:Ea(e,0,g)},Sa=new it(0),ka=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function bn(i,e){return Ca((ka(i),i.subarray(2,-4)),e)}var Aa=typeof TextDecoder<"u"&&new TextDecoder,Ta=0;try{Aa.decode(Sa,{stream:!0}),Ta=1}catch{}class Ra extends Br{constructor(e){super(e),this.type=gn}parse(e){const q=Math.pow(2.7182818,2.2);function z(o,u){let _=0;for(let O=0;O<65536;++O)(O==0||o[O>>3]&1<<(O&7))&&(u[_++]=O);const k=_-1;for(;_<65536;)u[_++]=0;return k}function N(o){for(let u=0;u<16384;u++)o[u]={},o[u].len=0,o[u].lit=0,o[u].p=null}const D={l:0,c:0,lc:0};function j(o,u,_,k,O){for(;_<o;)u=u<<8|Xe(k,O),_+=8;_-=o,D.l=u>>_&(1<<o)-1,D.c=u,D.lc=_}const Q=new Array(59);function ae(o){for(let _=0;_<=58;++_)Q[_]=0;for(let _=0;_<65537;++_)Q[o[_]]+=1;let u=0;for(let _=58;_>0;--_){const k=u+Q[_]>>1;Q[_]=u,u=k}for(let _=0;_<65537;++_){const k=o[_];k>0&&(o[_]=k|Q[k]++<<6)}}function Y(o,u,_,k,O,T){const F=u;let G=0,W=0;for(;k<=O;k++){if(F.value-u.value>_)return!1;j(6,G,W,o,F);const P=D.l;if(G=D.c,W=D.lc,T[k]=P,P==63){if(F.value-u.value>_)throw new Error("Something wrong with hufUnpackEncTable");j(8,G,W,o,F);let Z=D.l+6;if(G=D.c,W=D.lc,k+Z>O+1)throw new Error("Something wrong with hufUnpackEncTable");for(;Z--;)T[k++]=0;k--}else if(P>=59){let Z=P-59+2;if(k+Z>O+1)throw new Error("Something wrong with hufUnpackEncTable");for(;Z--;)T[k++]=0;k--}}ae(T)}function ve(o){return o&63}function Le(o){return o>>6}function Ee(o,u,_,k){for(;u<=_;u++){const O=Le(o[u]),T=ve(o[u]);if(O>>T)throw new Error("Invalid table entry");if(T>14){const F=k[O>>T-14];if(F.len)throw new Error("Invalid table entry");if(F.lit++,F.p){const G=F.p;F.p=new Array(F.lit);for(let W=0;W<F.lit-1;++W)F.p[W]=G[W]}else F.p=new Array(1);F.p[F.lit-1]=u}else if(T){let F=0;for(let G=1<<14-T;G>0;G--){const W=k[(O<<14-T)+F];if(W.len||W.p)throw new Error("Invalid table entry");W.len=T,W.lit=u,F++}}}return!0}const ee={c:0,lc:0};function Pe(o,u,_,k){o=o<<8|Xe(_,k),u+=8,ee.c=o,ee.lc=u}const le={c:0,lc:0};function ue(o,u,_,k,O,T,F,G,W){if(o==u){k<8&&(Pe(_,k,O,T),_=ee.c,k=ee.lc),k-=8;let P=_>>k;if(P=new Uint8Array([P])[0],G.value+P>W)return!1;const Z=F[G.value-1];for(;P-- >0;)F[G.value++]=Z}else if(G.value<W)F[G.value++]=o;else return!1;le.c=_,le.lc=k}function Ae(o){return o&65535}function oe(o){const u=Ae(o);return u>32767?u-65536:u}const _e={a:0,b:0};function He(o,u){const _=oe(o),O=oe(u),T=_+(O&1)+(O>>1),F=T,G=T-O;_e.a=F,_e.b=G}function Ye(o,u){const _=Ae(o),k=Ae(u),O=_-(k>>1)&65535,T=k+O-32768&65535;_e.a=T,_e.b=O}function Ot(o,u,_,k,O,T,F){const G=F<16384,W=_>O?O:_;let P=1,Z,te;for(;P<=W;)P<<=1;for(P>>=1,Z=P,P>>=1;P>=1;){te=0;const J=te+T*(O-Z),se=T*P,de=T*Z,ne=k*P,re=k*Z;let pe,Ie,De,Je;for(;te<=J;te+=de){let Te=te;const be=te+k*(_-Z);for(;Te<=be;Te+=re){const Me=Te+ne,nt=Te+se,Ne=nt+ne;G?(He(o[Te+u],o[nt+u]),pe=_e.a,De=_e.b,He(o[Me+u],o[Ne+u]),Ie=_e.a,Je=_e.b,He(pe,Ie),o[Te+u]=_e.a,o[Me+u]=_e.b,He(De,Je),o[nt+u]=_e.a,o[Ne+u]=_e.b):(Ye(o[Te+u],o[nt+u]),pe=_e.a,De=_e.b,Ye(o[Me+u],o[Ne+u]),Ie=_e.a,Je=_e.b,Ye(pe,Ie),o[Te+u]=_e.a,o[Me+u]=_e.b,Ye(De,Je),o[nt+u]=_e.a,o[Ne+u]=_e.b)}if(_&P){const Me=Te+se;G?He(o[Te+u],o[Me+u]):Ye(o[Te+u],o[Me+u]),pe=_e.a,o[Me+u]=_e.b,o[Te+u]=pe}}if(O&P){let Te=te;const be=te+k*(_-Z);for(;Te<=be;Te+=re){const Me=Te+ne;G?He(o[Te+u],o[Me+u]):Ye(o[Te+u],o[Me+u]),pe=_e.a,o[Me+u]=_e.b,o[Te+u]=pe}}Z=P,P>>=1}return te}function It(o,u,_,k,O,T,F,G,W){let P=0,Z=0;const te=F,J=Math.trunc(k.value+(O+7)/8);for(;k.value<J;)for(Pe(P,Z,_,k),P=ee.c,Z=ee.lc;Z>=14;){const de=P>>Z-14&16383,ne=u[de];if(ne.len)Z-=ne.len,ue(ne.lit,T,P,Z,_,k,G,W,te),P=le.c,Z=le.lc;else{if(!ne.p)throw new Error("hufDecode issues");let re;for(re=0;re<ne.lit;re++){const pe=ve(o[ne.p[re]]);for(;Z<pe&&k.value<J;)Pe(P,Z,_,k),P=ee.c,Z=ee.lc;if(Z>=pe&&Le(o[ne.p[re]])==(P>>Z-pe&(1<<pe)-1)){Z-=pe,ue(ne.p[re],T,P,Z,_,k,G,W,te),P=le.c,Z=le.lc;break}}if(re==ne.lit)throw new Error("hufDecode issues")}}const se=8-O&7;for(P>>=se,Z-=se;Z>0;){const de=u[P<<14-Z&16383];if(de.len)Z-=de.len,ue(de.lit,T,P,Z,_,k,G,W,te),P=le.c,Z=le.lc;else throw new Error("hufDecode issues")}return!0}function tt(o,u,_,k,O,T){const F={value:0},G=_.value,W=he(u,_),P=he(u,_);_.value+=4;const Z=he(u,_);if(_.value+=4,W<0||W>=65537||P<0||P>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const te=new Array(65537),J=new Array(16384);N(J);const se=k-(_.value-G);if(Y(o,_,se,W,P,te),Z>8*(k-(_.value-G)))throw new Error("Something wrong with hufUncompress");Ee(te,W,P,J),It(te,J,o,_,Z,P,T,O,F)}function gt(o,u,_){for(let k=0;k<_;++k)u[k]=o[u[k]]}function Ue(o){for(let u=1;u<o.length;u++){const _=o[u-1]+o[u]-128;o[u]=_}}function Be(o,u){let _=0,k=Math.floor((o.length+1)/2),O=0;const T=o.length-1;for(;!(O>T||(u[O++]=o[_++],O>T));)u[O++]=o[k++]}function yt(o){let u=o.byteLength;const _=new Array;let k=0;const O=new DataView(o);for(;u>0;){const T=O.getInt8(k++);if(T<0){const F=-T;u-=F+1;for(let G=0;G<F;G++)_.push(O.getUint8(k++))}else{const F=T;u-=2;const G=O.getUint8(k++);for(let W=0;W<F+1;W++)_.push(G)}}return _}function Dt(o,u,_,k,O,T){let F=new DataView(T.buffer);const G=_[o.idx[0]].width,W=_[o.idx[0]].height,P=3,Z=Math.floor(G/8),te=Math.ceil(G/8),J=Math.ceil(W/8),se=G-(te-1)*8,de=W-(J-1)*8,ne={value:0},re=new Array(P),pe=new Array(P),Ie=new Array(P),De=new Array(P),Je=new Array(P);for(let be=0;be<P;++be)Je[be]=u[o.idx[be]],re[be]=be<1?0:re[be-1]+te*J,pe[be]=new Float32Array(64),Ie[be]=new Uint16Array(64),De[be]=new Uint16Array(te*64);for(let be=0;be<J;++be){let Me=8;be==J-1&&(Me=de);let nt=8;for(let ye=0;ye<te;++ye){ye==te-1&&(nt=se);for(let Se=0;Se<P;++Se)Ie[Se].fill(0),Ie[Se][0]=O[re[Se]++],vt(ne,k,Ie[Se]),Ht(Ie[Se],pe[Se]),Lt(pe[Se]);xt(pe);for(let Se=0;Se<P;++Se)Ve(pe[Se],De[Se],ye*64)}let Ne=0;for(let ye=0;ye<P;++ye){const Se=_[o.idx[ye]].type;for(let wt=8*be;wt<8*be+Me;++wt){Ne=Je[ye][wt];for(let Qt=0;Qt<Z;++Qt){const pt=Qt*64+(wt&7)*8;F.setUint16(Ne+0*Se,De[ye][pt+0],!0),F.setUint16(Ne+2*Se,De[ye][pt+1],!0),F.setUint16(Ne+4*Se,De[ye][pt+2],!0),F.setUint16(Ne+6*Se,De[ye][pt+3],!0),F.setUint16(Ne+8*Se,De[ye][pt+4],!0),F.setUint16(Ne+10*Se,De[ye][pt+5],!0),F.setUint16(Ne+12*Se,De[ye][pt+6],!0),F.setUint16(Ne+14*Se,De[ye][pt+7],!0),Ne+=16*Se}}if(Z!=te)for(let wt=8*be;wt<8*be+Me;++wt){const Qt=Je[ye][wt]+8*Z*2*Se,pt=Z*64+(wt&7)*8;for(let mn=0;mn<nt;++mn)F.setUint16(Qt+mn*2*Se,De[ye][pt+mn],!0)}}}const Te=new Uint16Array(G);F=new DataView(T.buffer);for(let be=0;be<P;++be){_[o.idx[be]].decoded=!0;const Me=_[o.idx[be]].type;if(_[be].type==2)for(let nt=0;nt<W;++nt){const Ne=Je[be][nt];for(let ye=0;ye<G;++ye)Te[ye]=F.getUint16(Ne+ye*2*Me,!0);for(let ye=0;ye<G;++ye)F.setFloat32(Ne+ye*2*Me,M(Te[ye]),!0)}}}function vt(o,u,_){let k,O=1;for(;O<64;)k=u[o.value],k==65280?O=64:k>>8==255?O+=k&255:(_[O]=k,O++),o.value++}function Ht(o,u){u[0]=M(o[0]),u[1]=M(o[1]),u[2]=M(o[5]),u[3]=M(o[6]),u[4]=M(o[14]),u[5]=M(o[15]),u[6]=M(o[27]),u[7]=M(o[28]),u[8]=M(o[2]),u[9]=M(o[4]),u[10]=M(o[7]),u[11]=M(o[13]),u[12]=M(o[16]),u[13]=M(o[26]),u[14]=M(o[29]),u[15]=M(o[42]),u[16]=M(o[3]),u[17]=M(o[8]),u[18]=M(o[12]),u[19]=M(o[17]),u[20]=M(o[25]),u[21]=M(o[30]),u[22]=M(o[41]),u[23]=M(o[43]),u[24]=M(o[9]),u[25]=M(o[11]),u[26]=M(o[18]),u[27]=M(o[24]),u[28]=M(o[31]),u[29]=M(o[40]),u[30]=M(o[44]),u[31]=M(o[53]),u[32]=M(o[10]),u[33]=M(o[19]),u[34]=M(o[23]),u[35]=M(o[32]),u[36]=M(o[39]),u[37]=M(o[45]),u[38]=M(o[52]),u[39]=M(o[54]),u[40]=M(o[20]),u[41]=M(o[22]),u[42]=M(o[33]),u[43]=M(o[38]),u[44]=M(o[46]),u[45]=M(o[51]),u[46]=M(o[55]),u[47]=M(o[60]),u[48]=M(o[21]),u[49]=M(o[34]),u[50]=M(o[37]),u[51]=M(o[47]),u[52]=M(o[50]),u[53]=M(o[56]),u[54]=M(o[59]),u[55]=M(o[61]),u[56]=M(o[35]),u[57]=M(o[36]),u[58]=M(o[48]),u[59]=M(o[49]),u[60]=M(o[57]),u[61]=M(o[58]),u[62]=M(o[62]),u[63]=M(o[63])}function Lt(o){const u=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),k=.5*Math.cos(3.14159/8),O=.5*Math.cos(3*3.14159/16),T=.5*Math.cos(5*3.14159/16),F=.5*Math.cos(3*3.14159/8),G=.5*Math.cos(7*3.14159/16),W=new Array(4),P=new Array(4),Z=new Array(4),te=new Array(4);for(let J=0;J<8;++J){const se=J*8;W[0]=k*o[se+2],W[1]=F*o[se+2],W[2]=k*o[se+6],W[3]=F*o[se+6],P[0]=_*o[se+1]+O*o[se+3]+T*o[se+5]+G*o[se+7],P[1]=O*o[se+1]-G*o[se+3]-_*o[se+5]-T*o[se+7],P[2]=T*o[se+1]-_*o[se+3]+G*o[se+5]+O*o[se+7],P[3]=G*o[se+1]-T*o[se+3]+O*o[se+5]-_*o[se+7],Z[0]=u*(o[se+0]+o[se+4]),Z[3]=u*(o[se+0]-o[se+4]),Z[1]=W[0]+W[3],Z[2]=W[1]-W[2],te[0]=Z[0]+Z[1],te[1]=Z[3]+Z[2],te[2]=Z[3]-Z[2],te[3]=Z[0]-Z[1],o[se+0]=te[0]+P[0],o[se+1]=te[1]+P[1],o[se+2]=te[2]+P[2],o[se+3]=te[3]+P[3],o[se+4]=te[3]-P[3],o[se+5]=te[2]-P[2],o[se+6]=te[1]-P[1],o[se+7]=te[0]-P[0]}for(let J=0;J<8;++J)W[0]=k*o[16+J],W[1]=F*o[16+J],W[2]=k*o[48+J],W[3]=F*o[48+J],P[0]=_*o[8+J]+O*o[24+J]+T*o[40+J]+G*o[56+J],P[1]=O*o[8+J]-G*o[24+J]-_*o[40+J]-T*o[56+J],P[2]=T*o[8+J]-_*o[24+J]+G*o[40+J]+O*o[56+J],P[3]=G*o[8+J]-T*o[24+J]+O*o[40+J]-_*o[56+J],Z[0]=u*(o[J]+o[32+J]),Z[3]=u*(o[J]-o[32+J]),Z[1]=W[0]+W[3],Z[2]=W[1]-W[2],te[0]=Z[0]+Z[1],te[1]=Z[3]+Z[2],te[2]=Z[3]-Z[2],te[3]=Z[0]-Z[1],o[0+J]=te[0]+P[0],o[8+J]=te[1]+P[1],o[16+J]=te[2]+P[2],o[24+J]=te[3]+P[3],o[32+J]=te[3]-P[3],o[40+J]=te[2]-P[2],o[48+J]=te[1]-P[1],o[56+J]=te[0]-P[0]}function xt(o){for(let u=0;u<64;++u){const _=o[0][u],k=o[1][u],O=o[2][u];o[0][u]=_+1.5747*O,o[1][u]=_-.1873*k-.4682*O,o[2][u]=_+1.8556*k}}function Ve(o,u,_){for(let k=0;k<64;++k)u[_+k]=yi.toHalfFloat(Ut(o[k]))}function Ut(o){return o<=1?Math.sign(o)*Math.pow(Math.abs(o),2.2):Math.sign(o)*Math.pow(q,Math.abs(o)-1)}function Mt(o){return new DataView(o.array.buffer,o.offset.value,o.size)}function V(o){const u=o.viewer.buffer.slice(o.offset.value,o.offset.value+o.size),_=new Uint8Array(yt(u)),k=new Uint8Array(_.length);return Ue(_),Be(_,k),new DataView(k.buffer)}function H(o){const u=o.array.slice(o.offset.value,o.offset.value+o.size),_=bn(u),k=new Uint8Array(_.length);return Ue(_),Be(_,k),new DataView(k.buffer)}function $(o){const u=o.viewer,_={value:o.offset.value},k=new Uint16Array(o.width*o.scanlineBlockSize*(o.channels*o.type)),O=new Uint8Array(8192);let T=0;const F=new Array(o.channels);for(let de=0;de<o.channels;de++)F[de]={},F[de].start=T,F[de].end=F[de].start,F[de].nx=o.width,F[de].ny=o.lines,F[de].size=o.type,T+=F[de].nx*F[de].ny*F[de].size;const G=we(u,_),W=we(u,_);if(W>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(G<=W)for(let de=0;de<W-G+1;de++)O[de+G]=Ke(u,_);const P=new Uint16Array(65536),Z=z(O,P),te=he(u,_);tt(o.array,u,_,te,k,T);for(let de=0;de<o.channels;++de){const ne=F[de];for(let re=0;re<F[de].size;++re)Ot(k,ne.start+re,ne.nx,ne.size,ne.ny,ne.nx*ne.size,Z)}gt(P,k,T);let J=0;const se=new Uint8Array(k.buffer.byteLength);for(let de=0;de<o.lines;de++)for(let ne=0;ne<o.channels;ne++){const re=F[ne],pe=re.nx*re.size,Ie=new Uint8Array(k.buffer,re.end*2,pe*2);se.set(Ie,J),J+=pe*2,re.end+=pe}return new DataView(se.buffer)}function X(o){const u=o.array.slice(o.offset.value,o.offset.value+o.size),_=bn(u),k=o.lines*o.channels*o.width,O=o.type==1?new Uint16Array(k):new Uint32Array(k);let T=0,F=0;const G=new Array(4);for(let W=0;W<o.lines;W++)for(let P=0;P<o.channels;P++){let Z=0;switch(o.type){case 1:G[0]=T,G[1]=G[0]+o.width,T=G[1]+o.width;for(let te=0;te<o.width;++te){const J=_[G[0]++]<<8|_[G[1]++];Z+=J,O[F]=Z,F++}break;case 2:G[0]=T,G[1]=G[0]+o.width,G[2]=G[1]+o.width,T=G[2]+o.width;for(let te=0;te<o.width;++te){const J=_[G[0]++]<<24|_[G[1]++]<<16|_[G[2]++]<<8;Z+=J,O[F]=Z,F++}break}}return new DataView(O.buffer)}function B(o){const u=o.viewer,_={value:o.offset.value},k=new Uint8Array(o.width*o.lines*(o.channels*o.type*2)),O={version:qe(u,_),unknownUncompressedSize:qe(u,_),unknownCompressedSize:qe(u,_),acCompressedSize:qe(u,_),dcCompressedSize:qe(u,_),rleCompressedSize:qe(u,_),rleUncompressedSize:qe(u,_),rleRawSize:qe(u,_),totalAcUncompressedCount:qe(u,_),totalDcUncompressedCount:qe(u,_),acCompression:qe(u,_)};if(O.version<2)throw new Error("EXRLoader.parse: "+Jt.compression+" version "+O.version+" is unsupported");const T=new Array;let F=we(u,_)-2;for(;F>0;){const ne=ie(u.buffer,_),re=Ke(u,_),pe=re>>2&3,Ie=(re>>4)-1,De=new Int8Array([Ie])[0],Je=Ke(u,_);T.push({name:ne,index:De,type:Je,compression:pe}),F-=ne.length+3}const G=Jt.channels,W=new Array(o.channels);for(let ne=0;ne<o.channels;++ne){const re=W[ne]={},pe=G[ne];re.name=pe.name,re.compression=0,re.decoded=!1,re.type=pe.pixelType,re.pLinear=pe.pLinear,re.width=o.width,re.height=o.lines}const P={idx:new Array(3)};for(let ne=0;ne<o.channels;++ne){const re=W[ne];for(let pe=0;pe<T.length;++pe){const Ie=T[pe];re.name==Ie.name&&(re.compression=Ie.compression,Ie.index>=0&&(P.idx[Ie.index]=ne),re.offset=ne)}}let Z,te,J;if(O.acCompressedSize>0)switch(O.acCompression){case 0:Z=new Uint16Array(O.totalAcUncompressedCount),tt(o.array,u,_,O.acCompressedSize,Z,O.totalAcUncompressedCount);break;case 1:const ne=o.array.slice(_.value,_.value+O.totalAcUncompressedCount),re=bn(ne);Z=new Uint16Array(re.buffer),_.value+=O.totalAcUncompressedCount;break}if(O.dcCompressedSize>0){const ne={array:o.array,offset:_,size:O.dcCompressedSize};te=new Uint16Array(H(ne).buffer),_.value+=O.dcCompressedSize}if(O.rleRawSize>0){const ne=o.array.slice(_.value,_.value+O.rleCompressedSize),re=bn(ne);J=yt(re.buffer),_.value+=O.rleCompressedSize}let se=0;const de=new Array(W.length);for(let ne=0;ne<de.length;++ne)de[ne]=new Array;for(let ne=0;ne<o.lines;++ne)for(let re=0;re<W.length;++re)de[re].push(se),se+=W[re].width*o.type*2;Dt(P,de,W,Z,te,k);for(let ne=0;ne<W.length;++ne){const re=W[ne];if(!re.decoded)switch(re.compression){case 2:let pe=0,Ie=0;for(let De=0;De<o.lines;++De){let Je=de[ne][pe];for(let Te=0;Te<re.width;++Te){for(let be=0;be<2*re.type;++be)k[Je++]=J[Ie+be*re.width*re.height];Ie++}pe++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(k.buffer)}function ie(o,u){const _=new Uint8Array(o);let k=0;for(;_[u.value+k]!=0;)k+=1;const O=new TextDecoder().decode(_.slice(u.value,u.value+k));return u.value=u.value+k+1,O}function ce(o,u,_){const k=new TextDecoder().decode(new Uint8Array(o).slice(u.value,u.value+_));return u.value=u.value+_,k}function fe(o,u){const _=xe(o,u),k=he(o,u);return[_,k]}function me(o,u){const _=he(o,u),k=he(o,u);return[_,k]}function xe(o,u){const _=o.getInt32(u.value,!0);return u.value=u.value+4,_}function he(o,u){const _=o.getUint32(u.value,!0);return u.value=u.value+4,_}function Xe(o,u){const _=o[u.value];return u.value=u.value+1,_}function Ke(o,u){const _=o.getUint8(u.value);return u.value=u.value+1,_}const qe=function(o,u){let _;return"getBigInt64"in DataView.prototype?_=Number(o.getBigInt64(u.value,!0)):_=o.getUint32(u.value+4,!0)+Number(o.getUint32(u.value,!0)<<32),u.value+=8,_};function p(o,u){const _=o.getFloat32(u.value,!0);return u.value+=4,_}function K(o,u){return yi.toHalfFloat(p(o,u))}function M(o){const u=(o&31744)>>10,_=o&1023;return(o>>15?-1:1)*(u?u===31?_?NaN:1/0:Math.pow(2,u-15)*(1+_/1024):6103515625e-14*(_/1024))}function we(o,u){const _=o.getUint16(u.value,!0);return u.value+=2,_}function Ze(o,u){return M(we(o,u))}function ht(o,u,_,k){const O=_.value,T=[];for(;_.value<O+k-1;){const F=ie(u,_),G=xe(o,_),W=Ke(o,_);_.value+=3;const P=xe(o,_),Z=xe(o,_);T.push({name:F,pixelType:G,pLinear:W,xSampling:P,ySampling:Z})}return _.value+=1,T}function $e(o,u){const _=p(o,u),k=p(o,u),O=p(o,u),T=p(o,u),F=p(o,u),G=p(o,u),W=p(o,u),P=p(o,u);return{redX:_,redY:k,greenX:O,greenY:T,blueX:F,blueY:G,whiteX:W,whiteY:P}}function _i(o,u){const _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],k=Ke(o,u);return _[k]}function Un(o,u){const _=he(o,u),k=he(o,u),O=he(o,u),T=he(o,u);return{xMin:_,yMin:k,xMax:O,yMax:T}}function pn(o,u){const _=["INCREASING_Y"],k=Ke(o,u);return _[k]}function rt(o,u){const _=p(o,u),k=p(o,u);return[_,k]}function at(o,u){const _=p(o,u),k=p(o,u),O=p(o,u);return[_,k,O]}function Pt(o,u,_,k,O){if(k==="string"||k==="stringvector"||k==="iccProfile")return ce(u,_,O);if(k==="chlist")return ht(o,u,_,O);if(k==="chromaticities")return $e(o,_);if(k==="compression")return _i(o,_);if(k==="box2i")return Un(o,_);if(k==="lineOrder")return pn(o,_);if(k==="float")return p(o,_);if(k==="v2f")return rt(o,_);if(k==="v3f")return at(o,_);if(k==="int")return xe(o,_);if(k==="rational")return fe(o,_);if(k==="timecode")return me(o,_);if(k==="preview")return _.value+=O,"skipped";_.value+=O}function ot(o,u,_){const k={};if(o.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");k.version=o.getUint8(4);const O=o.getUint8(5);k.spec={singleTile:!!(O&2),longName:!!(O&4),deepFormat:!!(O&8),multiPart:!!(O&16)},_.value=8;let T=!0;for(;T;){const F=ie(u,_);if(F==0)T=!1;else{const G=ie(u,_),W=he(o,_),P=Pt(o,u,_,G,W);P===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${G}'.`):k[F]=P}}if((O&-5)!=0)throw console.error("THREE.EXRHeader:",k),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return k}function Nt(o,u,_,k,O){const T={size:0,viewer:u,array:_,offset:k,width:o.dataWindow.xMax-o.dataWindow.xMin+1,height:o.dataWindow.yMax-o.dataWindow.yMin+1,channels:o.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:o.channels[0].pixelType,uncompress:null,getter:null,format:null,colorSpace:bi};switch(o.compression){case"NO_COMPRESSION":T.lines=1,T.uncompress=Mt;break;case"RLE_COMPRESSION":T.lines=1,T.uncompress=V;break;case"ZIPS_COMPRESSION":T.lines=1,T.uncompress=H;break;case"ZIP_COMPRESSION":T.lines=16,T.uncompress=H;break;case"PIZ_COMPRESSION":T.lines=32,T.uncompress=$;break;case"PXR24_COMPRESSION":T.lines=16,T.uncompress=X;break;case"DWAA_COMPRESSION":T.lines=32,T.uncompress=B;break;case"DWAB_COMPRESSION":T.lines=256,T.uncompress=B;break;default:throw new Error("EXRLoader.parse: "+o.compression+" is unsupported")}if(T.scanlineBlockSize=T.lines,T.type==1)switch(O){case Pn:T.getter=Ze,T.inputSize=2;break;case gn:T.getter=we,T.inputSize=2;break}else if(T.type==2)switch(O){case Pn:T.getter=p,T.inputSize=4;break;case gn:T.getter=K,T.inputSize=4}else throw new Error("EXRLoader.parse: unsupported pixelType "+T.type+" for "+o.compression+".");T.blockCount=(o.dataWindow.yMax+1)/T.scanlineBlockSize;for(let G=0;G<T.blockCount;G++)qe(u,k);T.outputChannels=T.channels==3?4:T.channels;const F=T.width*T.height*T.outputChannels;switch(O){case Pn:T.byteArray=new Float32Array(F),T.channels<T.outputChannels&&T.byteArray.fill(1,0,F);break;case gn:T.byteArray=new Uint16Array(F),T.channels<T.outputChannels&&T.byteArray.fill(15360,0,F);break;default:console.error("THREE.EXRLoader: unsupported type: ",O);break}return T.bytesPerLine=T.width*T.inputSize*T.channels,T.outputChannels==4?(T.format=Zr,T.colorSpace=bi):(T.format=Gr,T.colorSpace=Vr),T}const bt=new DataView(e),_n=new Uint8Array(e),qt={value:0},Jt=ot(bt,e,qt),ge=Nt(Jt,bt,_n,qt,this.type),mi={value:0},Tr={R:0,G:1,B:2,A:3,Y:0};for(let o=0;o<ge.height/ge.scanlineBlockSize;o++){const u=he(bt,qt);ge.size=he(bt,qt),ge.lines=u+ge.scanlineBlockSize>ge.height?ge.height-u:ge.scanlineBlockSize;const k=ge.size<ge.lines*ge.bytesPerLine?ge.uncompress(ge):Mt(ge);qt.value+=ge.size;for(let O=0;O<ge.scanlineBlockSize;O++){const T=O+o*ge.scanlineBlockSize;if(T>=ge.height)break;for(let F=0;F<ge.channels;F++){const G=Tr[Jt.channels[F].name];for(let W=0;W<ge.width;W++){mi.value=(O*(ge.channels*ge.width)+F*ge.width+W)*ge.inputSize;const P=(ge.height-1-T)*(ge.width*ge.outputChannels)+W*ge.outputChannels+G;ge.byteArray[P]=ge.getter(k,mi)}}}}return{header:Jt,width:ge.width,height:ge.height,data:ge.byteArray,format:ge.format,colorSpace:ge.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,n,t,r){function a(l,c){l.colorSpace=c.colorSpace,l.minFilter=wi,l.magFilter=wi,l.generateMipmaps=!1,l.flipY=!1,n&&n(l,c)}return super.load(e,a,t,r)}}class Oa extends Vn{constructor(e=null){super();const n=new Wr;n.deleteAttribute("uv");const t=new xi({side:jr}),r=new xi;let a=5;e!==null&&e._useLegacyLights===!1&&(a=900);const l=new Yr(16777215,a,28,2);l.position.set(.418,16.199,.3),this.add(l);const c=new Qe(n,t);c.position.set(-.757,13.219,.717),c.scale.set(31.713,28.305,28.591),this.add(c);const h=new Qe(n,r);h.position.set(-10.906,2.009,1.846),h.rotation.set(0,-.195,0),h.scale.set(2.328,7.905,4.651),this.add(h);const g=new Qe(n,r);g.position.set(-5.607,-.754,-.758),g.rotation.set(0,.994,0),g.scale.set(1.97,1.534,3.955),this.add(g);const v=new Qe(n,r);v.position.set(6.167,.857,7.803),v.rotation.set(0,.561,0),v.scale.set(3.927,6.285,3.687),this.add(v);const b=new Qe(n,r);b.position.set(-2.017,.018,6.124),b.rotation.set(0,.333,0),b.scale.set(2.002,4.566,2.064),this.add(b);const C=new Qe(n,r);C.position.set(2.291,-.756,-2.621),C.rotation.set(0,-.286,0),C.scale.set(1.546,1.552,1.496),this.add(C);const I=new Qe(n,r);I.position.set(-2.193,-.369,-5.547),I.rotation.set(0,.516,0),I.scale.set(3.875,3.487,2.986),this.add(I);const f=new Qe(n,Gt(50));f.position.set(-16.116,14.37,8.208),f.scale.set(.1,2.428,2.739),this.add(f);const y=new Qe(n,Gt(50));y.position.set(-16.109,18.021,-8.207),y.scale.set(.1,2.425,2.751),this.add(y);const s=new Qe(n,Gt(17));s.position.set(14.904,12.198,-1.832),s.scale.set(.15,4.265,6.331),this.add(s);const d=new Qe(n,Gt(43));d.position.set(-.462,8.89,14.52),d.scale.set(4.38,5.441,.088),this.add(d);const x=new Qe(n,Gt(20));x.position.set(3.235,11.486,-12.541),x.scale.set(2.5,2,.1),this.add(x);const w=new Qe(n,Gt(100));w.position.set(0,20,0),w.scale.set(1,.1,1),this.add(w)}dispose(){const e=new Set;this.traverse(n=>{n.isMesh&&(e.add(n.geometry),e.add(n.material))});for(const n of e)n.dispose()}}function Gt(i){const e=new Xr;return e.color.setScalar(i),e}function Ia(i){if(!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=i,document.head.appendChild(e),i}}function $t(i,e){var n=i.__state.conversionName.toString(),t=Math.round(i.r),r=Math.round(i.g),a=Math.round(i.b),l=i.a,c=Math.round(i.h),h=i.s.toFixed(1),g=i.v.toFixed(1);if(e||n==="THREE_CHAR_HEX"||n==="SIX_CHAR_HEX"){for(var v=i.hex.toString(16);v.length<6;)v="0"+v;return"#"+v}else{if(n==="CSS_RGB")return"rgb("+t+","+r+","+a+")";if(n==="CSS_RGBA")return"rgba("+t+","+r+","+a+","+l+")";if(n==="HEX")return"0x"+i.hex.toString(16);if(n==="RGB_ARRAY")return"["+t+","+r+","+a+"]";if(n==="RGBA_ARRAY")return"["+t+","+r+","+a+","+l+"]";if(n==="RGB_OBJ")return"{r:"+t+",g:"+r+",b:"+a+"}";if(n==="RGBA_OBJ")return"{r:"+t+",g:"+r+",b:"+a+",a:"+l+"}";if(n==="HSV_OBJ")return"{h:"+c+",s:"+h+",v:"+g+"}";if(n==="HSVA_OBJ")return"{h:"+c+",s:"+h+",v:"+g+",a:"+l+"}"}return"unknown format"}var Ii=Array.prototype.forEach,en=Array.prototype.slice,L={BREAK:{},extend:function(e){return this.each(en.call(arguments,1),function(n){var t=this.isObject(n)?Object.keys(n):[];t.forEach((function(r){this.isUndefined(n[r])||(e[r]=n[r])}).bind(this))},this),e},defaults:function(e){return this.each(en.call(arguments,1),function(n){var t=this.isObject(n)?Object.keys(n):[];t.forEach((function(r){this.isUndefined(e[r])&&(e[r]=n[r])}).bind(this))},this),e},compose:function(){var e=en.call(arguments);return function(){for(var n=en.call(arguments),t=e.length-1;t>=0;t--)n=[e[t].apply(this,n)];return n[0]}},each:function(e,n,t){if(e){if(Ii&&e.forEach&&e.forEach===Ii)e.forEach(n,t);else if(e.length===e.length+0){var r=void 0,a=void 0;for(r=0,a=e.length;r<a;r++)if(r in e&&n.call(t,e[r],r)===this.BREAK)return}else for(var l in e)if(n.call(t,e[l],l)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,n,t){var r=void 0;return function(){var a=this,l=arguments;function c(){r=null,t||e.apply(a,l)}var h=t||!r;clearTimeout(r),r=setTimeout(c,n),h&&e.apply(a,l)}},toArray:function(e){return e.toArray?e.toArray():en.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:(function(i){function e(n){return i.apply(this,arguments)}return e.toString=function(){return i.toString()},e})(function(i){return isNaN(i)}),isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},Da=[{litmus:L.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var n=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return n===null?!1:{space:"HEX",hex:parseInt("0x"+n[1].toString()+n[1].toString()+n[2].toString()+n[2].toString()+n[3].toString()+n[3].toString(),0)}},write:$t},SIX_CHAR_HEX:{read:function(e){var n=e.match(/^#([A-F0-9]{6})$/i);return n===null?!1:{space:"HEX",hex:parseInt("0x"+n[1].toString(),0)}},write:$t},CSS_RGB:{read:function(e){var n=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return n===null?!1:{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3])}},write:$t},CSS_RGBA:{read:function(e){var n=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return n===null?!1:{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(n[4])}},write:$t}}},{litmus:L.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:L.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:L.isObject,conversions:{RGBA_OBJ:{read:function(e){return L.isNumber(e.r)&&L.isNumber(e.g)&&L.isNumber(e.b)&&L.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return L.isNumber(e.r)&&L.isNumber(e.g)&&L.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return L.isNumber(e.h)&&L.isNumber(e.s)&&L.isNumber(e.v)&&L.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return L.isNumber(e.h)&&L.isNumber(e.s)&&L.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],tn=void 0,wn=void 0,Yn=function(){wn=!1;var e=arguments.length>1?L.toArray(arguments):arguments[0];return L.each(Da,function(n){if(n.litmus(e))return L.each(n.conversions,function(t,r){if(tn=t.read(e),wn===!1&&tn!==!1)return wn=tn,tn.conversionName=r,tn.conversion=t,L.BREAK}),L.BREAK}),wn},Di=void 0,On={hsv_to_rgb:function(e,n,t){var r=Math.floor(e/60)%6,a=e/60-Math.floor(e/60),l=t*(1-n),c=t*(1-a*n),h=t*(1-(1-a)*n),g=[[t,h,l],[c,t,l],[l,t,h],[l,c,t],[h,l,t],[t,l,c]][r];return{r:g[0]*255,g:g[1]*255,b:g[2]*255}},rgb_to_hsv:function(e,n,t){var r=Math.min(e,n,t),a=Math.max(e,n,t),l=a-r,c=void 0,h=void 0;if(a!==0)h=l/a;else return{h:NaN,s:0,v:0};return e===a?c=(n-t)/l:n===a?c=2+(t-e)/l:c=4+(e-n)/l,c/=6,c<0&&(c+=1),{h:c*360,s:h,v:a/255}},rgb_to_hex:function(e,n,t){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,n),r=this.hex_with_component(r,0,t),r},component_from_hex:function(e,n){return e>>n*8&255},hex_with_component:function(e,n,t){return t<<(Di=n*8)|e&~(255<<Di)}},La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},dt=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},ft=(function(){function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}})(),At=function i(e,n,t){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(r===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:i(a,n,t)}else{if("value"in r)return r.value;var l=r.get;return l===void 0?void 0:l.call(t)}},Tt=function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)},Rt=function(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i},ze=(function(){function i(){if(dt(this,i),this.__state=Yn.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return ft(i,[{key:"toString",value:function(){return $t(this)}},{key:"toHexString",value:function(){return $t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),i})();function di(i,e,n){Object.defineProperty(i,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(ze.recalculateRGB(this,e,n),this.__state[e])},set:function(r){this.__state.space!=="RGB"&&(ze.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=r}})}function fi(i,e){Object.defineProperty(i,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(ze.recalculateHSV(this),this.__state[e])},set:function(t){this.__state.space!=="HSV"&&(ze.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}ze.recalculateRGB=function(i,e,n){if(i.__state.space==="HEX")i.__state[e]=On.component_from_hex(i.__state.hex,n);else if(i.__state.space==="HSV")L.extend(i.__state,On.hsv_to_rgb(i.__state.h,i.__state.s,i.__state.v));else throw new Error("Corrupted color state")};ze.recalculateHSV=function(i){var e=On.rgb_to_hsv(i.r,i.g,i.b);L.extend(i.__state,{s:e.s,v:e.v}),L.isNaN(e.h)?L.isUndefined(i.__state.h)&&(i.__state.h=0):i.__state.h=e.h};ze.COMPONENTS=["r","g","b","h","s","v","hex","a"];di(ze.prototype,"r",2);di(ze.prototype,"g",1);di(ze.prototype,"b",0);fi(ze.prototype,"h");fi(ze.prototype,"s");fi(ze.prototype,"v");Object.defineProperty(ze.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(ze.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=On.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var zt=(function(){function i(e,n){dt(this,i),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return ft(i,[{key:"onChange",value:function(n){return this.__onChange=n,this}},{key:"onFinishChange",value:function(n){return this.__onFinishChange=n,this}},{key:"setValue",value:function(n){return this.object[this.property]=n,this.__onChange&&this.__onChange.call(this,n),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),i})(),Ua={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},pr={};L.each(Ua,function(i,e){L.each(i,function(n){pr[n]=e})});var Ma=/(\d+(\.\d+)?)px/;function _t(i){if(i==="0"||L.isUndefined(i))return 0;var e=i.match(Ma);return L.isNull(e)?0:parseFloat(e[1])}var A={makeSelectable:function(e,n){e===void 0||e.style===void 0||(e.onselectstart=n?function(){return!1}:function(){},e.style.MozUserSelect=n?"auto":"none",e.style.KhtmlUserSelect=n?"auto":"none",e.unselectable=n?"on":"off")},makeFullscreen:function(e,n,t){var r=t,a=n;L.isUndefined(a)&&(a=!0),L.isUndefined(r)&&(r=!0),e.style.position="absolute",a&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,t,r){var a=t||{},l=pr[n];if(!l)throw new Error("Event type "+n+" not supported.");var c=document.createEvent(l);switch(l){case"MouseEvents":{var h=a.x||a.clientX||0,g=a.y||a.clientY||0;c.initMouseEvent(n,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,h,g,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var v=c.initKeyboardEvent||c.initKeyEvent;L.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),v(n,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break}default:{c.initEvent(n,a.bubbles||!1,a.cancelable||!0);break}}L.defaults(c,r),e.dispatchEvent(c)},bind:function(e,n,t,r){var a=r||!1;return e.addEventListener?e.addEventListener(n,t,a):e.attachEvent&&e.attachEvent("on"+n,t),A},unbind:function(e,n,t,r){var a=r||!1;return e.removeEventListener?e.removeEventListener(n,t,a):e.detachEvent&&e.detachEvent("on"+n,t),A},addClass:function(e,n){if(e.className===void 0)e.className=n;else if(e.className!==n){var t=e.className.split(/ +/);t.indexOf(n)===-1&&(t.push(n),e.className=t.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(e,n){if(n)if(e.className===n)e.removeAttribute("class");else{var t=e.className.split(/ +/),r=t.indexOf(n);r!==-1&&(t.splice(r,1),e.className=t.join(" "))}else e.className=void 0;return A},hasClass:function(e,n){return new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return _t(n["border-left-width"])+_t(n["border-right-width"])+_t(n["padding-left"])+_t(n["padding-right"])+_t(n.width)},getHeight:function(e){var n=getComputedStyle(e);return _t(n["border-top-width"])+_t(n["border-bottom-width"])+_t(n["padding-top"])+_t(n["padding-bottom"])+_t(n.height)},getOffset:function(e){var n=e,t={left:0,top:0};if(n.offsetParent)do t.left+=n.offsetLeft,t.top+=n.offsetTop,n=n.offsetParent;while(n);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},_r=(function(i){Tt(e,i);function e(n,t){dt(this,e);var r=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t)),a=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function l(){a.setValue(!a.__prev)}return A.bind(r.__checkbox,"change",l,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return ft(e,[{key:"setValue",value:function(t){var r=At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e})(zt),Pa=(function(i){Tt(e,i);function e(n,t,r){dt(this,e);var a=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t)),l=r,c=a;if(a.__select=document.createElement("select"),L.isArray(l)){var h={};L.each(l,function(g){h[g]=g}),l=h}return L.each(l,function(g,v){var b=document.createElement("option");b.innerHTML=v,b.setAttribute("value",g),c.__select.appendChild(b)}),a.updateDisplay(),A.bind(a.__select,"change",function(){var g=this.options[this.selectedIndex].value;c.setValue(g)}),a.domElement.appendChild(a.__select),a}return ft(e,[{key:"setValue",value:function(t){var r=At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e})(zt),Na=(function(i){Tt(e,i);function e(n,t){dt(this,e);var r=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t)),a=r;function l(){a.setValue(a.__input.value)}function c(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"keyup",l),A.bind(r.__input,"change",l),A.bind(r.__input,"blur",c),A.bind(r.__input,"keydown",function(h){h.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return ft(e,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e})(zt);function Li(i){var e=i.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var mr=(function(i){Tt(e,i);function e(n,t,r){dt(this,e);var a=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t)),l=r||{};return a.__min=l.min,a.__max=l.max,a.__step=l.step,L.isUndefined(a.__step)?a.initialValue===0?a.__impliedStep=1:a.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(a.initialValue))/Math.LN10))/10:a.__impliedStep=a.__step,a.__precision=Li(a.__impliedStep),a}return ft(e,[{key:"setValue",value:function(t){var r=t;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=Li(t),this}}]),e})(zt);function Fa(i,e){var n=Math.pow(10,e);return Math.round(i*n)/n}var In=(function(i){Tt(e,i);function e(n,t,r){dt(this,e);var a=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t,r));a.__truncationSuspended=!1;var l=a,c=void 0;function h(){var f=parseFloat(l.__input.value);L.isNaN(f)||l.setValue(f)}function g(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function v(){g()}function b(f){var y=c-f.clientY;l.setValue(l.getValue()+y*l.__impliedStep),c=f.clientY}function C(){A.unbind(window,"mousemove",b),A.unbind(window,"mouseup",C),g()}function I(f){A.bind(window,"mousemove",b),A.bind(window,"mouseup",C),c=f.clientY}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),A.bind(a.__input,"change",h),A.bind(a.__input,"blur",v),A.bind(a.__input,"mousedown",I),A.bind(a.__input,"keydown",function(f){f.keyCode===13&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,g())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return ft(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Fa(this.getValue(),this.__precision),At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e})(mr);function Ui(i,e,n,t,r){return t+(r-t)*((i-e)/(n-e))}var Xn=(function(i){Tt(e,i);function e(n,t,r,a,l){dt(this,e);var c=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t,{min:r,max:a,step:l})),h=c;c.__background=document.createElement("div"),c.__foreground=document.createElement("div"),A.bind(c.__background,"mousedown",g),A.bind(c.__background,"touchstart",C),A.addClass(c.__background,"slider"),A.addClass(c.__foreground,"slider-fg");function g(y){document.activeElement.blur(),A.bind(window,"mousemove",v),A.bind(window,"mouseup",b),v(y)}function v(y){y.preventDefault();var s=h.__background.getBoundingClientRect();return h.setValue(Ui(y.clientX,s.left,s.right,h.__min,h.__max)),!1}function b(){A.unbind(window,"mousemove",v),A.unbind(window,"mouseup",b),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function C(y){y.touches.length===1&&(A.bind(window,"touchmove",I),A.bind(window,"touchend",f),I(y))}function I(y){var s=y.touches[0].clientX,d=h.__background.getBoundingClientRect();h.setValue(Ui(s,d.left,d.right,h.__min,h.__max))}function f(){A.unbind(window,"touchmove",I),A.unbind(window,"touchend",f),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return c.updateDisplay(),c.__background.appendChild(c.__foreground),c.domElement.appendChild(c.__background),c}return ft(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=t*100+"%",At(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e})(mr),gr=(function(i){Tt(e,i);function e(n,t,r){dt(this,e);var a=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t)),l=a;return a.__button=document.createElement("div"),a.__button.innerHTML=r===void 0?"Fire":r,A.bind(a.__button,"click",function(c){return c.preventDefault(),l.fire(),!1}),A.addClass(a.__button,"button"),a.domElement.appendChild(a.__button),a}return ft(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e})(zt),$n=(function(i){Tt(e,i);function e(n,t){dt(this,e);var r=Rt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t));r.__color=new ze(r.getValue()),r.__temp=new ze(0);var a=r;r.domElement=document.createElement("div"),A.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",A.bind(r.__input,"keydown",function(y){y.keyCode===13&&b.call(this)}),A.bind(r.__input,"blur",b),A.bind(r.__selector,"mousedown",function(){A.addClass(this,"drag").bind(window,"mouseup",function(){A.removeClass(a.__selector,"drag")})}),A.bind(r.__selector,"touchstart",function(){A.addClass(this,"drag").bind(window,"touchend",function(){A.removeClass(a.__selector,"drag")})});var l=document.createElement("div");L.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),L.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),L.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),L.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),L.extend(l.style,{width:"100%",height:"100%",background:"none"}),Mi(l,"top","rgba(0,0,0,0)","#000"),L.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Ha(r.__hue_field),L.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(r.__saturation_field,"mousedown",c),A.bind(r.__saturation_field,"touchstart",c),A.bind(r.__field_knob,"mousedown",c),A.bind(r.__field_knob,"touchstart",c),A.bind(r.__hue_field,"mousedown",h),A.bind(r.__hue_field,"touchstart",h);function c(y){I(y),A.bind(window,"mousemove",I),A.bind(window,"touchmove",I),A.bind(window,"mouseup",g),A.bind(window,"touchend",g)}function h(y){f(y),A.bind(window,"mousemove",f),A.bind(window,"touchmove",f),A.bind(window,"mouseup",v),A.bind(window,"touchend",v)}function g(){A.unbind(window,"mousemove",I),A.unbind(window,"touchmove",I),A.unbind(window,"mouseup",g),A.unbind(window,"touchend",g),C()}function v(){A.unbind(window,"mousemove",f),A.unbind(window,"touchmove",f),A.unbind(window,"mouseup",v),A.unbind(window,"touchend",v),C()}function b(){var y=Yn(this.value);y!==!1?(a.__color.__state=y,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function C(){a.__onFinishChange&&a.__onFinishChange.call(a,a.__color.toOriginal())}r.__saturation_field.appendChild(l),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function I(y){y.type.indexOf("touch")===-1&&y.preventDefault();var s=a.__saturation_field.getBoundingClientRect(),d=y.touches&&y.touches[0]||y,x=d.clientX,w=d.clientY,m=(x-s.left)/(s.right-s.left),R=1-(w-s.top)/(s.bottom-s.top);return R>1?R=1:R<0&&(R=0),m>1?m=1:m<0&&(m=0),a.__color.v=R,a.__color.s=m,a.setValue(a.__color.toOriginal()),!1}function f(y){y.type.indexOf("touch")===-1&&y.preventDefault();var s=a.__hue_field.getBoundingClientRect(),d=y.touches&&y.touches[0]||y,x=d.clientY,w=1-(x-s.top)/(s.bottom-s.top);return w>1?w=1:w<0&&(w=0),a.__color.h=w*360,a.setValue(a.__color.toOriginal()),!1}return r}return ft(e,[{key:"updateDisplay",value:function(){var t=Yn(this.getValue());if(t!==!1){var r=!1;L.each(ze.COMPONENTS,function(c){if(!L.isUndefined(t[c])&&!L.isUndefined(this.__color.__state[c])&&t[c]!==this.__color.__state[c])return r=!0,{}},this),r&&L.extend(this.__color.__state,t)}L.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,l=255-a;L.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Mi(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),L.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+l+","+l+","+l+",.7)"})}}]),e})(zt),za=["-moz-","-o-","-webkit-","-ms-",""];function Mi(i,e,n,t){i.style.background="",L.each(za,function(r){i.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+t+" 100%); "})}function Ha(i){i.style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Ba={load:function(e,n){var t=n||document,r=t.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,n){var t=n||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var a=t.getElementsByTagName("head")[0];try{a.appendChild(r)}catch{}}},Za=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Ga=function(e,n){var t=e[n];return L.isArray(arguments[2])||L.isObject(arguments[2])?new Pa(e,n,arguments[2]):L.isNumber(t)?L.isNumber(arguments[2])&&L.isNumber(arguments[3])?L.isNumber(arguments[4])?new Xn(e,n,arguments[2],arguments[3],arguments[4]):new Xn(e,n,arguments[2],arguments[3]):L.isNumber(arguments[4])?new In(e,n,{min:arguments[2],max:arguments[3],step:arguments[4]}):new In(e,n,{min:arguments[2],max:arguments[3]}):L.isString(t)?new Na(e,n):L.isFunction(t)?new gr(e,n,""):L.isBoolean(t)?new _r(e,n):null};function Va(i){setTimeout(i,1e3/60)}var Wa=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Va,ja=(function(){function i(){dt(this,i),this.backgroundElement=document.createElement("div"),L.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),L.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;A.bind(this.backgroundElement,"click",function(){e.hide()})}return ft(i,[{key:"show",value:function(){var n=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),L.defer(function(){n.backgroundElement.style.opacity=1,n.domElement.style.opacity=1,n.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var n=this,t=function r(){n.domElement.style.display="none",n.backgroundElement.style.display="none",A.unbind(n.domElement,"webkitTransitionEnd",r),A.unbind(n.domElement,"transitionend",r),A.unbind(n.domElement,"oTransitionEnd",r)};A.bind(this.domElement,"webkitTransitionEnd",t),A.bind(this.domElement,"transitionend",t),A.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),i})(),Ya=Ia(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Ba.inject(Ya);var Pi="dg",Ni=72,Fi=20,fn="Default",rn=(function(){try{return!!window.localStorage}catch{return!1}})(),cn=void 0,zi=!0,Yt=void 0,Hn=!1,vr=[],ke=function i(e){var n=this,t=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,Pi),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=L.defaults(t,{closeOnTop:!1,autoPlace:!0,width:i.DEFAULT_WIDTH}),t=L.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),L.isUndefined(t.load)?t.load={preset:fn}:t.preset&&(t.load.preset=t.preset),L.isUndefined(t.parent)&&t.hideable&&vr.push(this),t.resizable=L.isUndefined(t.parent)&&t.resizable,t.autoPlace&&L.isUndefined(t.scrollable)&&(t.scrollable=!0);var r=rn&&localStorage.getItem(Xt(this,"isLocal"))==="true",a=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},closeOnTop:{get:function(){return t.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(C){n.parent?n.getRoot().preset=C:t.load.preset=C,qa(this),n.revert()}},width:{get:function(){return t.width},set:function(C){t.width=C,Jn(n,C)}},name:{get:function(){return t.name},set:function(C){t.name=C,l&&(l.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(C){t.closed=C,t.closed?A.addClass(n.__ul,i.CLASS_CLOSED):A.removeClass(n.__ul,i.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=C?i.TEXT_OPEN:i.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return r},set:function(C){rn&&(r=C,C?A.bind(window,"unload",a):A.unbind(window,"unload",a),localStorage.setItem(Xt(n,"isLocal"),C))}}}),L.isUndefined(t.parent)){if(this.closed=t.closed||!1,A.addClass(this.domElement,i.CLASS_MAIN),A.makeSelectable(this.domElement,!1),rn&&r){n.useLocalStorage=!0;var c=localStorage.getItem(Xt(this,"gui"));c&&(t.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=i.TEXT_CLOSED,A.addClass(this.__closeButton,i.CLASS_CLOSE_BUTTON),t.closeOnTop?(A.addClass(this.__closeButton,i.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,i.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{t.closed===void 0&&(t.closed=!0);var h=document.createTextNode(t.name);A.addClass(h,"controller-name"),l=hi(n,h);var g=function(C){return C.preventDefault(),n.closed=!n.closed,!1};A.addClass(this.__ul,i.CLASS_CLOSED),A.addClass(l,"title"),A.bind(l,"click",g),t.closed||(this.closed=!1)}t.autoPlace&&(L.isUndefined(t.parent)&&(zi&&(Yt=document.createElement("div"),A.addClass(Yt,Pi),A.addClass(Yt,i.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Yt),zi=!1),Yt.appendChild(this.domElement),A.addClass(this.domElement,i.CLASS_AUTO_PLACE)),this.parent||Jn(n,t.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),t.resizable&&Ka(this),a=function(){rn&&localStorage.getItem(Xt(n,"isLocal"))==="true"&&localStorage.setItem(Xt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a;function v(){var b=n.getRoot();b.width+=1,L.defer(function(){b.width-=1})}t.parent||v()};ke.toggleHide=function(){Hn=!Hn,L.each(vr,function(i){i.domElement.style.display=Hn?"none":""})};ke.CLASS_AUTO_PLACE="a";ke.CLASS_AUTO_PLACE_CONTAINER="ac";ke.CLASS_MAIN="main";ke.CLASS_CONTROLLER_ROW="cr";ke.CLASS_TOO_TALL="taller-than-window";ke.CLASS_CLOSED="closed";ke.CLASS_CLOSE_BUTTON="close-button";ke.CLASS_CLOSE_TOP="close-top";ke.CLASS_CLOSE_BOTTOM="close-bottom";ke.CLASS_DRAG="drag";ke.DEFAULT_WIDTH=245;ke.TEXT_CLOSED="Close Controls";ke.TEXT_OPEN="Open Controls";ke._keydownHandler=function(i){document.activeElement.type!=="text"&&(i.which===Ni||i.keyCode===Ni)&&ke.toggleHide()};A.bind(window,"keydown",ke._keydownHandler,!1);L.extend(ke.prototype,{add:function(e,n){return un(this,e,n,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,n){return un(this,e,n,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var n=this;L.defer(function(){n.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Yt.removeChild(this.domElement);var e=this;L.each(this.__folders,function(n){e.removeFolder(n)}),A.unbind(window,"keydown",ke._keydownHandler,!1),Hi(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var n={name:e,parent:this};n.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(n.closed=this.load.folders[e].closed,n.load=this.load.folders[e]);var t=new ke(n);this.__folders[e]=t;var r=hi(this,t.domElement);return A.addClass(r,"folder"),t},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Hi(e);var n=this;L.each(e.__folders,function(t){e.removeFolder(t)}),L.defer(function(){n.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var n=A.getOffset(e.__ul).top,t=0;L.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(t+=A.getHeight(r))}),window.innerHeight-n-Fi<t?(A.addClass(e.domElement,ke.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-n-Fi+"px"):(A.removeClass(e.domElement,ke.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&L.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:L.debounce(function(){this.onResize()},50),remember:function(){if(L.isUndefined(cn)&&(cn=new ja,cn.domElement.innerHTML=Za),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;L.each(Array.prototype.slice.call(arguments),function(n){e.__rememberedObjects.length===0&&$a(e),e.__rememberedObjects.indexOf(n)===-1&&e.__rememberedObjects.push(n)}),this.autoPlace&&Jn(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=yn(this)),e.folders={},L.each(this.__folders,function(n,t){e.folders[t]=n.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=yn(this),Kn(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[fn]=yn(this,!0)),this.load.remembered[e]=yn(this),this.preset=e,qn(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){L.each(this.__controllers,function(n){this.getRoot().load.remembered?br(e||this.getRoot(),n):n.setValue(n.initialValue),n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())},this),L.each(this.__folders,function(n){n.revert(n)}),e||Kn(this.getRoot(),!1)},listen:function(e){var n=this.__listening.length===0;this.__listening.push(e),n&&wr(this.__listening)},updateDisplay:function(){L.each(this.__controllers,function(e){e.updateDisplay()}),L.each(this.__folders,function(e){e.updateDisplay()})}});function hi(i,e,n){var t=document.createElement("li");return e&&t.appendChild(e),n?i.__ul.insertBefore(t,n):i.__ul.appendChild(t),i.onResize(),t}function Hi(i){A.unbind(window,"resize",i.__resizeHandler),i.saveToLocalStorageIfPossible&&A.unbind(window,"unload",i.saveToLocalStorageIfPossible)}function Kn(i,e){var n=i.__preset_select[i.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function Xa(i,e,n){if(n.__li=e,n.__gui=i,L.extend(n,{options:function(l){if(arguments.length>1){var c=n.__li.nextElementSibling;return n.remove(),un(i,n.object,n.property,{before:c,factoryArgs:[L.toArray(arguments)]})}if(L.isArray(l)||L.isObject(l)){var h=n.__li.nextElementSibling;return n.remove(),un(i,n.object,n.property,{before:h,factoryArgs:[l]})}},name:function(l){return n.__li.firstElementChild.firstElementChild.innerHTML=l,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Xn){var t=new In(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});L.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(a){var l=n[a],c=t[a];n[a]=t[a]=function(){var h=Array.prototype.slice.call(arguments);return c.apply(t,h),l.apply(n,h)}}),A.addClass(e,"has-slider"),n.domElement.insertBefore(t.domElement,n.domElement.firstElementChild)}else if(n instanceof In){var r=function(l){if(L.isNumber(n.__min)&&L.isNumber(n.__max)){var c=n.__li.firstElementChild.firstElementChild.innerHTML,h=n.__gui.__listening.indexOf(n)>-1;n.remove();var g=un(i,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return g.name(c),h&&g.listen(),g}return l};n.min=L.compose(r,n.min),n.max=L.compose(r,n.max)}else n instanceof _r?(A.bind(e,"click",function(){A.fakeEvent(n.__checkbox,"click")}),A.bind(n.__checkbox,"click",function(a){a.stopPropagation()})):n instanceof gr?(A.bind(e,"click",function(){A.fakeEvent(n.__button,"click")}),A.bind(e,"mouseover",function(){A.addClass(n.__button,"hover")}),A.bind(e,"mouseout",function(){A.removeClass(n.__button,"hover")})):n instanceof $n&&(A.addClass(e,"color"),n.updateDisplay=L.compose(function(a){return e.style.borderLeftColor=n.__color.toString(),a},n.updateDisplay),n.updateDisplay());n.setValue=L.compose(function(a){return i.getRoot().__preset_select&&n.isModified()&&Kn(i.getRoot(),!0),a},n.setValue)}function br(i,e){var n=i.getRoot(),t=n.__rememberedObjects.indexOf(e.object);if(t!==-1){var r=n.__rememberedObjectIndecesToControllers[t];if(r===void 0&&(r={},n.__rememberedObjectIndecesToControllers[t]=r),r[e.property]=e,n.load&&n.load.remembered){var a=n.load.remembered,l=void 0;if(a[i.preset])l=a[i.preset];else if(a[fn])l=a[fn];else return;if(l[t]&&l[t][e.property]!==void 0){var c=l[t][e.property];e.initialValue=c,e.setValue(c)}}}}function un(i,e,n,t){if(e[n]===void 0)throw new Error('Object "'+e+'" has no property "'+n+'"');var r=void 0;if(t.color)r=new $n(e,n);else{var a=[e,n].concat(t.factoryArgs);r=Ga.apply(i,a)}t.before instanceof zt&&(t.before=t.before.__li),br(i,r),A.addClass(r.domElement,"c");var l=document.createElement("span");A.addClass(l,"property-name"),l.innerHTML=r.property;var c=document.createElement("div");c.appendChild(l),c.appendChild(r.domElement);var h=hi(i,c,t.before);return A.addClass(h,ke.CLASS_CONTROLLER_ROW),r instanceof $n?A.addClass(h,"color"):A.addClass(h,La(r.getValue())),Xa(i,h,r),i.__controllers.push(r),r}function Xt(i,e){return document.location.href+"."+e}function qn(i,e,n){var t=document.createElement("option");t.innerHTML=e,t.value=e,i.__preset_select.appendChild(t),n&&(i.__preset_select.selectedIndex=i.__preset_select.length-1)}function Bi(i,e){e.style.display=i.useLocalStorage?"block":"none"}function $a(i){var e=i.__save_row=document.createElement("li");A.addClass(i.domElement,"has-save"),i.__ul.insertBefore(e,i.__ul.firstChild),A.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var t=document.createElement("span");t.innerHTML="Save",A.addClass(t,"button"),A.addClass(t,"save");var r=document.createElement("span");r.innerHTML="New",A.addClass(r,"button"),A.addClass(r,"save-as");var a=document.createElement("span");a.innerHTML="Revert",A.addClass(a,"button"),A.addClass(a,"revert");var l=i.__preset_select=document.createElement("select");if(i.load&&i.load.remembered?L.each(i.load.remembered,function(b,C){qn(i,C,C===i.preset)}):qn(i,fn,!1),A.bind(l,"change",function(){for(var b=0;b<i.__preset_select.length;b++)i.__preset_select[b].innerHTML=i.__preset_select[b].value;i.preset=this.value}),e.appendChild(l),e.appendChild(n),e.appendChild(t),e.appendChild(r),e.appendChild(a),rn){var c=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage"),g=document.getElementById("dg-save-locally");g.style.display="block",localStorage.getItem(Xt(i,"isLocal"))==="true"&&h.setAttribute("checked","checked"),Bi(i,c),A.bind(h,"change",function(){i.useLocalStorage=!i.useLocalStorage,Bi(i,c)})}var v=document.getElementById("dg-new-constructor");A.bind(v,"keydown",function(b){b.metaKey&&(b.which===67||b.keyCode===67)&&cn.hide()}),A.bind(n,"click",function(){v.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),cn.show(),v.focus(),v.select()}),A.bind(t,"click",function(){i.save()}),A.bind(r,"click",function(){var b=prompt("Enter a new preset name.");b&&i.saveAs(b)}),A.bind(a,"click",function(){i.revert()})}function Ka(i){var e=void 0;i.__resize_handle=document.createElement("div"),L.extend(i.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function n(a){return a.preventDefault(),i.width+=e-a.clientX,i.onResize(),e=a.clientX,!1}function t(){A.removeClass(i.__closeButton,ke.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",t)}function r(a){return a.preventDefault(),e=a.clientX,A.addClass(i.__closeButton,ke.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",t),!1}A.bind(i.__resize_handle,"mousedown",r),A.bind(i.__closeButton,"mousedown",r),i.domElement.insertBefore(i.__resize_handle,i.domElement.firstElementChild)}function Jn(i,e){i.domElement.style.width=e+"px",i.__save_row&&i.autoPlace&&(i.__save_row.style.width=e+"px"),i.__closeButton&&(i.__closeButton.style.width=e+"px")}function yn(i,e){var n={};return L.each(i.__rememberedObjects,function(t,r){var a={},l=i.__rememberedObjectIndecesToControllers[r];L.each(l,function(c,h){a[h]=e?c.initialValue:c.getValue()}),n[r]=a}),n}function qa(i){for(var e=0;e<i.__preset_select.length;e++)i.__preset_select[e].value===i.preset&&(i.__preset_select.selectedIndex=e)}function wr(i){i.length!==0&&Wa.call(window,function(){wr(i)}),L.each(i,function(e){e.updateDisplay()})}var Ja=ke;const xn=[{id:"",name:"None",path:null},{id:"neutral",name:"Neutral",path:null},{id:"venice-sunset",name:"Venice Sunset",path:"https://storage.googleapis.com/donmccurdy-static/venice_sunset_1k.exr",format:".exr"},{id:"footprint-court",name:"Footprint Court (HDR Labs)",path:"https://storage.googleapis.com/donmccurdy-static/footprint_court_2k.exr",format:".exr"}],yr="JerryTian's 3D Gallery",En="[default]",Dn=new Jr,xr=`https://unpkg.com/three@0.${da}.x`,Qa=new ea(Dn).setDecoderPath(`${xr}/examples/jsm/libs/draco/gltf/`),eo=new ta(Dn).setTranscoderPath(`${xr}/examples/jsm/libs/basis/`);no();const Bn={ASSET_GENERATOR:"assetgenerator"};fa.enabled=!0;class to{constructor(e,n){this.el=e,this.options=n,getComputedStyle(this.el).position==="static"&&(this.el.style.position="relative"),this.lights=[],this.content=null,this.mixer=null,this.clips=[],this.gui=null,this.state={environment:n.preset===Bn.ASSET_GENERATOR?xn.find(a=>a.id==="footprint-court").name:xn[1].name,background:!1,playbackSpeed:1,actionStates:{},camera:En,wireframe:!1,skeleton:!1,grid:!1,autoRotate:!1,punctualLights:!0,exposure:0,toneMapping:Ei,ambientIntensity:.3,ambientColor:"#FFFFFF",directIntensity:.8*Math.PI,directColor:"#FFFFFF",bgColor:"#F5F5F7",pointSize:1},this.prevTime=0,this.stats=new sn,this.stats.dom.height="48px",[].forEach.call(this.stats.dom.children,a=>a.style.display=""),this.backgroundColor=new $r(this.state.bgColor),this.scene=new Vn,this.scene.background=this.backgroundColor;const t=n.preset===Bn.ASSET_GENERATOR?.8*180/Math.PI:60,r=e.clientWidth/e.clientHeight;this.defaultCamera=new Ci(t,r,.01,1e3),this.activeCamera=this.defaultCamera,this.scene.add(this.defaultCamera),this.renderer=window.renderer=new Si({antialias:!0}),this.renderer.setClearColor(13421772),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e.clientWidth,e.clientHeight),this.pmremGenerator=new Kr(this.renderer),this.pmremGenerator.compileEquirectangularShader(),this.neutralEnvironment=this.pmremGenerator.fromScene(new Oa).texture,this.controls=new _a(this.defaultCamera,this.renderer.domElement),this.controls.screenSpacePanning=!0,this.el.appendChild(this.renderer.domElement),this.cameraCtrl=null,this.cameraFolder=null,this.animFolder=null,this.animCtrls=[],this.morphFolder=null,this.morphCtrls=[],this.skeletonHelpers=[],this.gridHelper=null,this.axesHelper=null,this.createSpinner(),this.addAxesHelper(),this.addGUI(),n.kiosk&&this.gui.close(),this.animate=this.animate.bind(this),requestAnimationFrame(this.animate),window.addEventListener("resize",this.resize.bind(this),!1)}createSpinner(){if(!document.getElementById("viewer.vue-loader-style")){const e=document.createElement("style");e.id="viewer.vue-loader-style",e.innerHTML=`
             .viewer-loader-overlay {
                position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(255, 255, 255, 0.8);
                display: flex; 
                flex-direction: column; /*  */
                justify-content: center; align-items: center;
                z-index: 9999;
                visibility: hidden; opacity: 0; transition: opacity 0.3s;
                pointer-events: none;
             }
             .viewer-loader-overlay.visible {
                visibility: visible; opacity: 1; pointer-events: auto;
             }
             .viewer-spinner {
                width: 50px; height: 50px;
                border: 5px solid #e0e0e0;
                border-top: 5px solid #333;
                border-radius: 50%;
                animation: viewer-spin 1s linear infinite;
                margin-bottom: 15px; /*  */
             }
             /*  */
             .viewer-loader-text {
                font-family: sans-serif;
                font-size: 14px;
                color: #333;
                font-weight: bold;
             }
             @keyframes viewer-spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
             }
          `,document.head.appendChild(e)}this.spinnerEl=document.createElement("div"),this.spinnerEl.className="viewer.vue-loader-overlay",this.spinnerEl.innerHTML=`
            <div class="viewer-spinner"></div>
            <div class="viewer-loader-text">0%</div>
        `,this.el.appendChild(this.spinnerEl),this.progressEl=this.spinnerEl.querySelector(".viewer.vue-loader-text")}updateProgress(e){this.progressEl&&(this.progressEl.innerText=`${Math.floor(e)}%`)}showLoading(){this.spinnerEl&&(this.spinnerEl.classList.add("visible"),this.updateProgress(0))}hideLoading(){this.spinnerEl&&this.spinnerEl.classList.remove("visible")}animate(e){requestAnimationFrame(this.animate);const n=(e-this.prevTime)/1e3;this.controls.update(),this.stats.update(),this.mixer&&this.mixer.update(n),this.render(),this.prevTime=e}render(){this.renderer.render(this.scene,this.activeCamera),this.state.grid&&(this.axesCamera.position.copy(this.defaultCamera.position),this.axesCamera.lookAt(this.axesScene.position),this.axesRenderer.render(this.axesScene,this.axesCamera))}resize(){const{clientHeight:e,clientWidth:n}=this.el.parentElement;this.defaultCamera.aspect=n/e,this.defaultCamera.updateProjectionMatrix(),this.renderer.setSize(n,e),this.axesCamera.aspect=this.axesDiv.clientWidth/this.axesDiv.clientHeight,this.axesCamera.updateProjectionMatrix(),this.axesRenderer.setSize(this.axesDiv.clientWidth,this.axesDiv.clientHeight)}load(e,n,t){return this.showLoading(),new Promise((r,a)=>{this.loadModelInfo(e).then(l=>{console.log("loadModelInfo returned URL:",l),l.includes("/")||(l=`/my-3d-gallerymodels/${l}`),console.log("Final model URL:",l);const c=qr.extractUrlBase(l);Dn.setURLModifier((v,b)=>{const C=n+decodeURI(v).replace(c,"").replace(/^(\.?\/)/,"");if(t.has(C)){const I=t.get(C),f=URL.createObjectURL(I);return g.push(f),f}return(b||"")+v});const h=new Qr(Dn).setCrossOrigin("anonymous").setDRACOLoader(Qa).setKTX2Loader(eo.detectSupport(this.renderer)).setMeshoptDecoder(na),g=[];h.load(l,v=>{console.log("GLTFLoader loaded successfully:",v),this.hideLoading(),window.VIEWER&&(window.VIEWER.json=v);const b=v.scene||v.scenes[0],C=v.animations||[];if(!b)throw new Error("This model contains no scene, and cannot be viewed here. However, it may contain individual 3D resources.");console.log("Setting content, scene:",b),this.setContent(b,C),g.forEach(URL.revokeObjectURL),r(v)},v=>{if(v.lengthComputable&&v.total>0){let b=v.loaded/v.total*100;b=Math.min(b,100),this.updateProgress(b)}},v=>{console.error("GLTFLoader error:",v),this.hideLoading(),a(v)})}).catch(l=>{this.hideLoading(),a(l)})})}loadModelInfo(e){return new Promise(n=>{let t=e;const r=e.substring(e.lastIndexOf("/")+1),a=yr;fetch("/my-3d-gallerymodels/info.json").then(l=>{if(!l.ok)throw new Error("Info file not found");return l.json()}).then(l=>{const c=l[r]||l[e];if(c){const h=`${a} - ${c.name}`,g=document.querySelector("header h1");g&&(g.textContent=h),document.title=h,c.url&&(t=c.url)}else{const h=document.querySelector("header h1");h&&(h.textContent=a),document.title=a}n(t)}).catch(l=>{console.log("Model info not loaded:",l.message),n(t)})})}setContent(e,n){this.clear(),e.updateMatrixWorld();const t=new ia().setFromObject(e),r=t.getSize(new je).length(),a=t.getCenter(new je);this.controls.reset(),e.position.x-=a.x,e.position.y-=a.y,e.position.z-=a.z,this.controls.maxDistance=r*10,this.defaultCamera.near=r/100,this.defaultCamera.far=r*100,this.defaultCamera.updateProjectionMatrix(),this.options.cameraPosition?(this.defaultCamera.position.fromArray(this.options.cameraPosition),this.defaultCamera.lookAt(new je)):(this.defaultCamera.position.copy(a),this.defaultCamera.position.x+=r/2,this.defaultCamera.position.y+=r/5,this.defaultCamera.position.z+=r/2,this.defaultCamera.lookAt(a)),this.setCamera(En),this.axesCamera.position.copy(this.defaultCamera.position),this.axesCamera.lookAt(this.axesScene.position),this.axesCamera.near=r/100,this.axesCamera.far=r*100,this.axesCamera.updateProjectionMatrix(),this.axesCorner.scale.set(r,r,r),this.controls.saveState(),this.scene.add(e),this.content=e,this.state.punctualLights=!0,this.content.traverse(l=>{l.isLight&&(this.state.punctualLights=!1)}),this.setClips(n),this.updateLights(),this.updateGUI(),this.updateEnvironment(),this.updateDisplay(),window.VIEWER&&(window.VIEWER.scene=this.content),this.printGraph(this.content)}printGraph(e){console.group(" <"+e.type+"> "+e.name),e.children.forEach(n=>this.printGraph(n)),console.groupEnd()}setClips(e){this.mixer&&(this.mixer.stopAllAction(),this.mixer.uncacheRoot(this.mixer.getRoot()),this.mixer=null),this.clips=e,e.length&&(this.mixer=new ra(this.content))}playAllClips(){this.clips.forEach(e=>{this.mixer.clipAction(e).reset().play(),this.state.actionStates[e.name]=!0})}setCamera(e){e===En?(this.controls.enabled=!0,this.activeCamera=this.defaultCamera):(this.controls.enabled=!1,this.content.traverse(n=>{n.isCamera&&n.name===e&&(this.activeCamera=n)}))}updateLights(){const e=this.state,n=this.lights;e.punctualLights&&!n.length?this.addLights():!e.punctualLights&&n.length&&this.removeLights(),this.renderer.toneMapping=Number(e.toneMapping),this.renderer.toneMappingExposure=Math.pow(2,e.exposure),n.length===2&&(n[0].intensity=e.ambientIntensity,n[0].color.set(e.ambientColor),n[1].intensity=e.directIntensity,n[1].color.set(e.directColor))}addLights(){const e=this.state;if(this.options.preset===Bn.ASSET_GENERATOR){const r=new aa;r.name="hemi_light",this.scene.add(r),this.lights.push(r);return}const n=new oa(e.ambientColor,e.ambientIntensity);n.name="ambient_light",this.defaultCamera.add(n);const t=new sa(e.directColor,e.directIntensity);t.position.set(.5,0,.866),t.name="main_light",this.defaultCamera.add(t),this.lights.push(n,t)}removeLights(){this.lights.forEach(e=>e.parent.remove(e)),this.lights.length=0}updateEnvironment(){const e=xn.filter(n=>n.name===this.state.environment)[0];this.getCubeMapTexture(e).then(({envMap:n})=>{this.scene.environment=n,this.scene.background=this.state.background?n:this.backgroundColor})}getCubeMapTexture(e){const{id:n,path:t}=e;return n==="neutral"?Promise.resolve({envMap:this.neutralEnvironment}):n===""?Promise.resolve({envMap:null}):new Promise((r,a)=>{new Ra().load(t,l=>{const c=this.pmremGenerator.fromEquirectangular(l).texture;this.pmremGenerator.dispose(),r({envMap:c})},void 0,a)})}updateDisplay(){this.skeletonHelpers.length&&this.skeletonHelpers.forEach(e=>this.scene.remove(e)),Zi(this.content,e=>{e.wireframe=this.state.wireframe,e instanceof ha&&(e.size=this.state.pointSize)}),this.content.traverse(e=>{if(e.geometry&&e.skeleton&&this.state.skeleton){const n=new la(e.skeleton.bones[0].parent);n.material.linewidth=3,this.scene.add(n),this.skeletonHelpers.push(n)}}),this.state.grid!==!!this.gridHelper&&(this.state.grid?(this.gridHelper=new ca,this.axesHelper=new ki,this.axesHelper.renderOrder=999,this.axesHelper.onBeforeRender=e=>e.clearDepth(),this.scene.add(this.gridHelper),this.scene.add(this.axesHelper)):(this.scene.remove(this.gridHelper),this.scene.remove(this.axesHelper),this.gridHelper=null,this.axesHelper=null,this.axesRenderer.clear())),this.controls.autoRotate=this.state.autoRotate}updateBackground(){this.backgroundColor.set(this.state.bgColor)}addAxesHelper(){this.axesDiv=document.createElement("div"),this.el.appendChild(this.axesDiv),this.axesDiv.classList.add("axes");const{clientWidth:e,clientHeight:n}=this.axesDiv;this.axesScene=new Vn,this.axesCamera=new Ci(50,e/n,.1,10),this.axesScene.add(this.axesCamera),this.axesRenderer=new Si({alpha:!0}),this.axesRenderer.setPixelRatio(window.devicePixelRatio),this.axesRenderer.setSize(this.axesDiv.clientWidth,this.axesDiv.clientHeight),this.axesCamera.up=this.defaultCamera.up,this.axesCorner=new ki(5),this.axesScene.add(this.axesCorner),this.axesDiv.appendChild(this.axesRenderer.domElement)}addGUI(){this.gui&&(this.gui.destroy(),this.gui=null);const e=document.getElementById("viewer-gui-root");e&&e.parentNode&&e.parentNode.removeChild(e);const n=document.createElement("div");n.id="viewer-gui-root",document.body.appendChild(n);const t=this.gui=new Ja({autoPlace:!1,width:260,hideable:!0}),r=t.addFolder("Display");r.add(this.state,"background").onChange(()=>this.updateEnvironment()),r.add(this.state,"autoRotate").onChange(()=>this.updateDisplay()),r.add(this.state,"wireframe").onChange(()=>this.updateDisplay()),r.add(this.state,"skeleton").onChange(()=>this.updateDisplay()),r.add(this.state,"grid").onChange(()=>this.updateDisplay()),r.add(this.controls,"screenSpacePanning"),r.add(this.state,"pointSize",1,16).onChange(()=>this.updateDisplay()),r.addColor(this.state,"bgColor").onChange(()=>this.updateBackground());const C=t.addFolder("Lighting");C.add(this.state,"environment",xn.map(d=>d.name)).onChange(()=>this.updateEnvironment()),[C.add(this.state,"toneMapping",{Linear:Ei,"ACES Filmic":ua}),C.add(this.state,"exposure",-10,10,.01),C.add(this.state,"punctualLights").listen(),C.add(this.state,"ambientIntensity",0,2),C.addColor(this.state,"ambientColor"),C.add(this.state,"directIntensity",0,4),C.addColor(this.state,"directColor")].forEach(d=>d.onChange(()=>this.updateLights())),this.animFolder=t.addFolder("Animation"),this.animFolder.domElement.style.display="none",this.animFolder.add(this.state,"playbackSpeed",0,1).onChange(d=>{this.mixer&&(this.mixer.timeScale=d)}),this.animFolder.add({playAll:()=>this.playAllClips()},"playAll"),this.morphFolder=t.addFolder("Morph Targets"),this.morphFolder.domElement.style.display="none",this.cameraFolder=t.addFolder("Cameras"),this.cameraFolder.domElement.style.display="none";const y=t.addFolder("Performance"),s=document.createElement("li");this.stats.dom.style.position="static",s.appendChild(this.stats.dom),s.classList.add("gui-stats"),y.__ul.appendChild(s),n.appendChild(t.domElement),t.close()}updateGUI(){this.cameraFolder.domElement.style.display="none",this.morphCtrls.forEach(t=>t.remove()),this.morphCtrls.length=0,this.morphFolder.domElement.style.display="none",this.animCtrls.forEach(t=>t.remove()),this.animCtrls.length=0,this.animFolder.domElement.style.display="none";const e=[],n=[];if(this.content.traverse(t=>{t.geometry&&t.morphTargetInfluences&&n.push(t),t.isCamera&&(t.name=t.name||`VIEWER__camera_${e.length+1}`,e.push(t.name))}),e.length){this.cameraFolder.domElement.style.display="",this.cameraCtrl&&this.cameraCtrl.remove();const t=[En].concat(e);this.cameraCtrl=this.cameraFolder.add(this.state,"camera",t),this.cameraCtrl.onChange(r=>this.setCamera(r))}if(n.length&&(this.morphFolder.domElement.style.display="",n.forEach(t=>{if(t.morphTargetInfluences.length){const r=this.morphFolder.add({name:t.name||"Untitled"},"name");this.morphCtrls.push(r)}for(let r=0;r<t.morphTargetInfluences.length;r++){const a=this.morphFolder.add(t.morphTargetInfluences,r,0,1,.01).listen();Object.keys(t.morphTargetDictionary).forEach(l=>{l&&t.morphTargetDictionary[l]===r&&a.name(l)}),this.morphCtrls.push(a)}})),this.clips.length){this.animFolder.domElement.style.display="";const t=this.state.actionStates={};this.clips.forEach((r,a)=>{r.name=`${a+1}. ${r.name}`;let l;a===0?(t[r.name]=!0,l=this.mixer.clipAction(r),l.play()):t[r.name]=!1;const c=this.animFolder.add(t,r.name).listen();c.onChange(h=>{l=l||this.mixer.clipAction(r),l.setEffectiveTimeScale(1),h?l.play():l.stop()}),this.animCtrls.push(c)})}}clear(){this.content&&(this.scene.remove(this.content),this.content.traverse(e=>{e.geometry&&e.geometry.dispose()}),Zi(this.content,e=>{for(const n in e)n!=="envMap"&&e[n]&&e[n].isTexture&&e[n].dispose()}))}}function Zi(i,e){i.traverse(n=>{if(!n.geometry)return;(Array.isArray(n.material)?n.material:[n.material]).forEach(e)})}function no(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function io(i){const e=ut(null);return{viewer:e,createViewer:t=>(e.value=new to(t,i),e.value)}}class ro{constructor(e){Mn(this,"el");Mn(this,"toggleEl");this.el=e,this.toggleEl=document.createElement("div"),this.toggleEl.classList.add("report-toggle-wrap","hidden"),this.el.appendChild(this.toggleEl)}}function ao(){return{createValidator:(e=document.body)=>new ro(e)}}const oo={class:"report-toggle-text"},so={__name:"ValidatorToggle",props:{issues:{type:Object,default:null},reportError:{type:[String,Error],default:null}},emits:["close"],setup(i){const e=i,n=on(()=>e.issues?`level-${e.issues.maxSeverity}`:""),t=on(()=>e.issues?e.issues.numErrors?`${e.issues.numErrors} errors.`:e.issues.numWarnings?`${e.issues.numWarnings} warnings.`:e.issues.numHints?`${e.issues.numHints} hints.`:e.issues.numInfos?`${e.issues.numInfos} notes.`:"Model details":e.reportError?`Validation could not run: ${e.reportError}.`:"Validation could not run.");return(r,a)=>(St(),Ft("div",{class:Ir(["report-toggle",n.value])},[We("div",oo,or(t.value),1),We("div",{class:"report-toggle-close","aria-label":"Hide",onClick:a[0]||(a[0]=l=>r.$emit("close"))},"  ")],2))}},lo={key:0,class:"report-toggle-wrap"},co={__name:"ValidatorComponent",props:{validator:{type:Object,required:!0}},setup(i,{expose:e}){const n=i,t=ut(!1),r=ut(null),a=ut(null);sr(()=>n.validator,c=>{c&&c.report&&(r.value=c.report,a.value=null,t.value=!0)},{immediate:!0,deep:!0});const l=()=>{t.value=!1,n.validator&&n.validator.hideToggle()};return e({showToggle:()=>{t.value=!0},hideToggle:l,setReport:c=>{r.value=c,a.value=null,t.value=!0},setReportError:c=>{a.value=c,r.value=null,t.value=!0}}),(c,h)=>{var g;return t.value?(St(),Ft("div",lo,[Dr(so,{issues:(g=r.value)==null?void 0:g.issues,"report-error":a.value,onClose:l},null,8,["issues","report-error"])])):jt("",!0)}}};var Gi=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function Re(){var i=this;function e(n,t){var r=0;do r|=1&n,n>>>=1,r<<=1;while(--t>0);return r>>>1}i.build_tree=function(n){var t,r,a,l=i.dyn_tree,c=i.stat_desc.static_tree,h=i.stat_desc.elems,g=-1;for(n.heap_len=0,n.heap_max=573,t=0;t<h;t++)l[2*t]!==0?(n.heap[++n.heap_len]=g=t,n.depth[t]=0):l[2*t+1]=0;for(;n.heap_len<2;)l[2*(a=n.heap[++n.heap_len]=g<2?++g:0)]=1,n.depth[a]=0,n.opt_len--,c&&(n.static_len-=c[2*a+1]);for(i.max_code=g,t=Math.floor(n.heap_len/2);t>=1;t--)n.pqdownheap(l,t);a=h;do t=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(l,1),r=n.heap[1],n.heap[--n.heap_max]=t,n.heap[--n.heap_max]=r,l[2*a]=l[2*t]+l[2*r],n.depth[a]=Math.max(n.depth[t],n.depth[r])+1,l[2*t+1]=l[2*r+1]=a,n.heap[1]=a++,n.pqdownheap(l,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],(function(v){var b,C,I,f,y,s,d=i.dyn_tree,x=i.stat_desc.static_tree,w=i.stat_desc.extra_bits,m=i.stat_desc.extra_base,R=i.stat_desc.max_length,S=0;for(f=0;f<=15;f++)v.bl_count[f]=0;for(d[2*v.heap[v.heap_max]+1]=0,b=v.heap_max+1;b<573;b++)(f=d[2*d[2*(C=v.heap[b])+1]+1]+1)>R&&(f=R,S++),d[2*C+1]=f,C>i.max_code||(v.bl_count[f]++,y=0,C>=m&&(y=w[C-m]),v.opt_len+=(s=d[2*C])*(f+y),x&&(v.static_len+=s*(x[2*C+1]+y)));if(S!==0){do{for(f=R-1;v.bl_count[f]===0;)f--;v.bl_count[f]--,v.bl_count[f+1]+=2,v.bl_count[R]--,S-=2}while(S>0);for(f=R;f!==0;f--)for(C=v.bl_count[f];C!==0;)(I=v.heap[--b])>i.max_code||(d[2*I+1]!=f&&(v.opt_len+=(f-d[2*I+1])*d[2*I],d[2*I+1]=f),C--)}})(n),(function(v,b,C){var I,f,y,s=[],d=0;for(I=1;I<=15;I++)s[I]=d=d+C[I-1]<<1;for(f=0;f<=b;f++)(y=v[2*f+1])!==0&&(v[2*f]=e(s[y]++,y))})(l,i.max_code,n.bl_count)}}function Ge(i,e,n,t,r){var a=this;a.static_tree=i,a.extra_bits=e,a.extra_base=n,a.elems=t,a.max_length=r}function mt(i,e,n,t,r){var a=this;a.good_length=i,a.max_lazy=e,a.nice_length=n,a.max_chain=t,a.func=r}Re._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Re.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Re.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Re.d_code=function(i){return i<256?Gi[i]:Gi[256+(i>>>7)]},Re.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Re.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Re.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Re.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ge.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],Ge.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],Ge.static_l_desc=new Ge(Ge.static_ltree,Re.extra_lbits,257,286,15),Ge.static_d_desc=new Ge(Ge.static_dtree,Re.extra_dbits,0,30,15),Ge.static_bl_desc=new Ge(null,Re.extra_blbits,0,19,7);var ct=[new mt(0,0,0,0,0),new mt(4,4,8,4,1),new mt(4,5,16,8,1),new mt(4,6,32,32,1),new mt(4,4,16,16,2),new mt(8,16,32,32,2),new mt(8,16,128,128,2),new mt(8,32,128,256,2),new mt(32,128,258,1024,2),new mt(32,258,258,4096,2)],Cn=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function Vi(i,e,n,t){var r=i[2*e],a=i[2*n];return r<a||r==a&&t[e]<=t[n]}function uo(){var i,e,n,t,r,a,l,c,h,g,v,b,C,I,f,y,s,d,x,w,m,R,S,E,U,q,z,N,D,j,Q,ae,Y,ve,Le,Ee,ee,Pe,le,ue,Ae,oe=this,_e=new Re,He=new Re,Ye=new Re;function Ot(){var V;for(V=0;V<286;V++)Q[2*V]=0;for(V=0;V<30;V++)ae[2*V]=0;for(V=0;V<19;V++)Y[2*V]=0;Q[512]=1,oe.opt_len=oe.static_len=0,Ee=Pe=0}function It(V,H){var $,X,B=-1,ie=V[1],ce=0,fe=7,me=4;for(ie===0&&(fe=138,me=3),V[2*(H+1)+1]=65535,$=0;$<=H;$++)X=ie,ie=V[2*($+1)+1],++ce<fe&&X==ie||(ce<me?Y[2*X]+=ce:X!==0?(X!=B&&Y[2*X]++,Y[32]++):ce<=10?Y[34]++:Y[36]++,ce=0,B=X,ie===0?(fe=138,me=3):X==ie?(fe=6,me=3):(fe=7,me=4))}function tt(V){oe.pending_buf[oe.pending++]=V}function gt(V){tt(255&V),tt(V>>>8&255)}function Ue(V,H){var $,X=H;Ae>16-X?(gt(ue|=($=V)<<Ae&65535),ue=$>>>16-Ae,Ae+=X-16):(ue|=V<<Ae&65535,Ae+=X)}function Be(V,H){var $=2*V;Ue(65535&H[$],65535&H[$+1])}function yt(V,H){var $,X,B=-1,ie=V[1],ce=0,fe=7,me=4;for(ie===0&&(fe=138,me=3),$=0;$<=H;$++)if(X=ie,ie=V[2*($+1)+1],!(++ce<fe&&X==ie)){if(ce<me)do Be(X,Y);while(--ce!=0);else X!==0?(X!=B&&(Be(X,Y),ce--),Be(16,Y),Ue(ce-3,2)):ce<=10?(Be(17,Y),Ue(ce-3,3)):(Be(18,Y),Ue(ce-11,7));ce=0,B=X,ie===0?(fe=138,me=3):X==ie?(fe=6,me=3):(fe=7,me=4)}}function Dt(){Ae==16?(gt(ue),ue=0,Ae=0):Ae>=8&&(tt(255&ue),ue>>>=8,Ae-=8)}function vt(V,H){var $,X,B;if(oe.pending_buf[ee+2*Ee]=V>>>8&255,oe.pending_buf[ee+2*Ee+1]=255&V,oe.pending_buf[ve+Ee]=255&H,Ee++,V===0?Q[2*H]++:(Pe++,V--,Q[2*(Re._length_code[H]+256+1)]++,ae[2*Re.d_code(V)]++),(8191&Ee)==0&&z>2){for($=8*Ee,X=m-s,B=0;B<30;B++)$+=ae[2*B]*(5+Re.extra_dbits[B]);if($>>>=3,Pe<Math.floor(Ee/2)&&$<Math.floor(X/2))return!0}return Ee==Le-1}function Ht(V,H){var $,X,B,ie,ce=0;if(Ee!==0)do $=oe.pending_buf[ee+2*ce]<<8&65280|255&oe.pending_buf[ee+2*ce+1],X=255&oe.pending_buf[ve+ce],ce++,$===0?Be(X,V):(Be((B=Re._length_code[X])+256+1,V),(ie=Re.extra_lbits[B])!==0&&Ue(X-=Re.base_length[B],ie),$--,Be(B=Re.d_code($),H),(ie=Re.extra_dbits[B])!==0&&Ue($-=Re.base_dist[B],ie));while(ce<Ee);Be(256,V),le=V[513]}function Lt(){Ae>8?gt(ue):Ae>0&&tt(255&ue),ue=0,Ae=0}function xt(V,H,$){Ue(0+($?1:0),3),(function(X,B,ie){Lt(),le=8,gt(B),gt(~B),oe.pending_buf.set(c.subarray(X,X+B),oe.pending),oe.pending+=B})(V,H)}function Ve(V){(function(H,$,X){var B,ie,ce=0;z>0?(_e.build_tree(oe),He.build_tree(oe),ce=(function(){var fe;for(It(Q,_e.max_code),It(ae,He.max_code),Ye.build_tree(oe),fe=18;fe>=3&&Y[2*Re.bl_order[fe]+1]===0;fe--);return oe.opt_len+=3*(fe+1)+5+5+4,fe})(),(ie=oe.static_len+3+7>>>3)<=(B=oe.opt_len+3+7>>>3)&&(B=ie)):B=ie=$+5,$+4<=B&&H!=-1?xt(H,$,X):ie==B?(Ue(2+(X?1:0),3),Ht(Ge.static_ltree,Ge.static_dtree)):(Ue(4+(X?1:0),3),(function(fe,me,xe){var he;for(Ue(fe-257,5),Ue(me-1,5),Ue(xe-4,4),he=0;he<xe;he++)Ue(Y[2*Re.bl_order[he]+1],3);yt(Q,fe-1),yt(ae,me-1)})(_e.max_code+1,He.max_code+1,ce+1),Ht(Q,ae)),Ot(),X&&Lt()})(s>=0?s:-1,m-s,V),s=m,i.flush_pending()}function Ut(){var V,H,$,X;do{if((X=h-S-m)==0&&m===0&&S===0)X=r;else if(X==-1)X--;else if(m>=r+r-262){c.set(c.subarray(r,r+r),0),R-=r,m-=r,s-=r,$=V=C;do H=65535&v[--$],v[$]=H>=r?H-r:0;while(--V!=0);$=V=r;do H=65535&g[--$],g[$]=H>=r?H-r:0;while(--V!=0);X+=r}if(i.avail_in===0)return;V=i.read_buf(c,m+S,X),(S+=V)>=3&&(b=((b=255&c[m])<<y^255&c[m+1])&f)}while(S<262&&i.avail_in!==0)}function Mt(V){var H,$,X=U,B=m,ie=E,ce=m>r-262?m-(r-262):0,fe=j,me=l,xe=m+258,he=c[B+ie-1],Xe=c[B+ie];E>=D&&(X>>=2),fe>S&&(fe=S);do if(c[(H=V)+ie]==Xe&&c[H+ie-1]==he&&c[H]==c[B]&&c[++H]==c[B+1]){B+=2,H++;do;while(c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&c[++B]==c[++H]&&B<xe);if($=258-(xe-B),B=xe-258,$>ie){if(R=V,ie=$,$>=fe)break;he=c[B+ie-1],Xe=c[B+ie]}}while((V=65535&g[V&me])>ce&&--X!=0);return ie<=S?ie:S}oe.depth=[],oe.bl_count=[],oe.heap=[],Q=[],ae=[],Y=[],oe.pqdownheap=function(V,H){for(var $=oe.heap,X=$[H],B=H<<1;B<=oe.heap_len&&(B<oe.heap_len&&Vi(V,$[B+1],$[B],oe.depth)&&B++,!Vi(V,X,$[B],oe.depth));)$[H]=$[B],H=B,B<<=1;$[H]=X},oe.deflateInit=function(V,H,$,X,B,ie){return X||(X=8),B||(B=8),ie||(ie=0),V.msg=null,H==-1&&(H=6),B<1||B>9||X!=8||$<9||$>15||H<0||H>9||ie<0||ie>2?-2:(V.dstate=oe,l=(r=1<<(a=$))-1,f=(C=1<<(I=B+7))-1,y=Math.floor((I+3-1)/3),c=new Uint8Array(2*r),g=[],v=[],Le=1<<B+6,oe.pending_buf=new Uint8Array(4*Le),n=4*Le,ee=Math.floor(Le/2),ve=3*Le,z=H,N=ie,(function(ce){return ce.total_in=ce.total_out=0,ce.msg=null,oe.pending=0,oe.pending_out=0,e=113,t=0,_e.dyn_tree=Q,_e.stat_desc=Ge.static_l_desc,He.dyn_tree=ae,He.stat_desc=Ge.static_d_desc,Ye.dyn_tree=Y,Ye.stat_desc=Ge.static_bl_desc,ue=0,Ae=0,le=8,Ot(),(function(){var fe;for(h=2*r,v[C-1]=0,fe=0;fe<C-1;fe++)v[fe]=0;q=ct[z].max_lazy,D=ct[z].good_length,j=ct[z].nice_length,U=ct[z].max_chain,m=0,s=0,S=0,d=E=2,w=0,b=0})(),0})(V))},oe.deflateEnd=function(){return e!=42&&e!=113&&e!=666?-2:(oe.pending_buf=null,v=null,g=null,c=null,oe.dstate=null,e==113?-3:0)},oe.deflateParams=function(V,H,$){var X=0;return H==-1&&(H=6),H<0||H>9||$<0||$>2?-2:(ct[z].func!=ct[H].func&&V.total_in!==0&&(X=V.deflate(1)),z!=H&&(q=ct[z=H].max_lazy,D=ct[z].good_length,j=ct[z].nice_length,U=ct[z].max_chain),N=$,X)},oe.deflateSetDictionary=function(V,H,$){var X,B=$,ie=0;if(!H||e!=42)return-2;if(B<3)return 0;for(B>r-262&&(ie=$-(B=r-262)),c.set(H.subarray(ie,ie+B),0),m=B,s=B,b=((b=255&c[0])<<y^255&c[1])&f,X=0;X<=B-3;X++)g[X&l]=v[b=(b<<y^255&c[X+2])&f],v[b]=X;return 0},oe.deflate=function(V,H){var $,X,B,ie,ce,fe;if(H>4||H<0)return-2;if(!V.next_out||!V.next_in&&V.avail_in!==0||e==666&&H!=4)return V.msg=Cn[4],-2;if(V.avail_out===0)return V.msg=Cn[7],-5;if(i=V,ie=t,t=H,e==42&&(X=8+(a-8<<4)<<8,(B=(z-1&255)>>1)>3&&(B=3),X|=B<<6,m!==0&&(X|=32),e=113,tt((fe=X+=31-X%31)>>8&255),tt(255&fe)),oe.pending!==0){if(i.flush_pending(),i.avail_out===0)return t=-1,0}else if(i.avail_in===0&&H<=ie&&H!=4)return i.msg=Cn[7],-5;if(e==666&&i.avail_in!==0)return V.msg=Cn[7],-5;if(i.avail_in!==0||S!==0||H!=0&&e!=666){switch(ce=-1,ct[z].func){case 0:ce=(function(me){var xe,he=65535;for(he>n-5&&(he=n-5);;){if(S<=1){if(Ut(),S===0&&me==0)return 0;if(S===0)break}if(m+=S,S=0,xe=s+he,(m===0||m>=xe)&&(S=m-xe,m=xe,Ve(!1),i.avail_out===0)||m-s>=r-262&&(Ve(!1),i.avail_out===0))return 0}return Ve(me==4),i.avail_out===0?me==4?2:0:me==4?3:1})(H);break;case 1:ce=(function(me){for(var xe,he=0;;){if(S<262){if(Ut(),S<262&&me==0)return 0;if(S===0)break}if(S>=3&&(he=65535&v[b=(b<<y^255&c[m+2])&f],g[m&l]=v[b],v[b]=m),he!==0&&(m-he&65535)<=r-262&&N!=2&&(d=Mt(he)),d>=3)if(xe=vt(m-R,d-3),S-=d,d<=q&&S>=3){d--;do m++,he=65535&v[b=(b<<y^255&c[m+2])&f],g[m&l]=v[b],v[b]=m;while(--d!=0);m++}else m+=d,d=0,b=((b=255&c[m])<<y^255&c[m+1])&f;else xe=vt(0,255&c[m]),S--,m++;if(xe&&(Ve(!1),i.avail_out===0))return 0}return Ve(me==4),i.avail_out===0?me==4?2:0:me==4?3:1})(H);break;case 2:ce=(function(me){for(var xe,he,Xe=0;;){if(S<262){if(Ut(),S<262&&me==0)return 0;if(S===0)break}if(S>=3&&(Xe=65535&v[b=(b<<y^255&c[m+2])&f],g[m&l]=v[b],v[b]=m),E=d,x=R,d=2,Xe!==0&&E<q&&(m-Xe&65535)<=r-262&&(N!=2&&(d=Mt(Xe)),d<=5&&(N==1||d==3&&m-R>4096)&&(d=2)),E>=3&&d<=E){he=m+S-3,xe=vt(m-1-x,E-3),S-=E-1,E-=2;do++m<=he&&(Xe=65535&v[b=(b<<y^255&c[m+2])&f],g[m&l]=v[b],v[b]=m);while(--E!=0);if(w=0,d=2,m++,xe&&(Ve(!1),i.avail_out===0))return 0}else if(w!==0){if((xe=vt(0,255&c[m-1]))&&Ve(!1),m++,S--,i.avail_out===0)return 0}else w=1,m++,S--}return w!==0&&(xe=vt(0,255&c[m-1]),w=0),Ve(me==4),i.avail_out===0?me==4?2:0:me==4?3:1})(H)}if(ce!=2&&ce!=3||(e=666),ce==0||ce==2)return i.avail_out===0&&(t=-1),0;if(ce==1){if(H==1)Ue(2,3),Be(256,Ge.static_ltree),Dt(),1+le+10-Ae<9&&(Ue(2,3),Be(256,Ge.static_ltree),Dt()),le=7;else if(xt(0,0,!1),H==3)for($=0;$<C;$++)v[$]=0;if(i.flush_pending(),i.avail_out===0)return t=-1,0}}return H!=4?0:1}}function Er(){var i=this;i.next_in_index=0,i.next_out_index=0,i.avail_in=0,i.total_in=0,i.avail_out=0,i.total_out=0}function Cr(i){var e=new Er,n=512,t=new Uint8Array(n),r=i?i.level:-1;r===void 0&&(r=-1),e.deflateInit(r),e.next_out=t,this.append=function(a,l){var c,h=[],g=0,v=0,b=0;if(a.length){e.next_in_index=0,e.next_in=a,e.avail_in=a.length;do{if(e.next_out_index=0,e.avail_out=n,e.deflate(0)!=0)throw new Error("deflating: "+e.msg);e.next_out_index&&h.push(e.next_out_index==n?new Uint8Array(t):new Uint8Array(t.subarray(0,e.next_out_index))),b+=e.next_out_index,l&&e.next_in_index>0&&e.next_in_index!=g&&(l(e.next_in_index),g=e.next_in_index)}while(e.avail_in>0||e.avail_out===0);return c=new Uint8Array(b),h.forEach(function(C){c.set(C,v),v+=C.length}),c}},this.flush=function(){var a,l,c=[],h=0,g=0;do{if(e.next_out_index=0,e.avail_out=n,(a=e.deflate(4))!=1&&a!=0)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&c.push(new Uint8Array(t.subarray(0,e.next_out_index))),g+=e.next_out_index}while(e.avail_in>0||e.avail_out===0);return e.deflateEnd(),l=new Uint8Array(g),c.forEach(function(v){l.set(v,h),h+=v.length}),l}}Er.prototype={deflateInit:function(i,e){var n=this;return n.dstate=new uo,e||(e=15),n.dstate.deflateInit(n,i,e)},deflate:function(i){var e=this;return e.dstate?e.dstate.deflate(e,i):-2},deflateEnd:function(){var i=this;if(!i.dstate)return-2;var e=i.dstate.deflateEnd();return i.dstate=null,e},deflateParams:function(i,e){var n=this;return n.dstate?n.dstate.deflateParams(n,i,e):-2},deflateSetDictionary:function(i,e){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,i,e):-2},read_buf:function(i,e,n){var t=this,r=t.avail_in;return r>n&&(r=n),r===0?0:(t.avail_in-=r,i.set(t.next_in.subarray(t.next_in_index,t.next_in_index+r),e),t.next_in_index+=r,t.total_in+=r,r)},flush_pending:function(){var i=this,e=i.dstate.pending;e>i.avail_out&&(e=i.avail_out),e!==0&&(i.next_out.set(i.dstate.pending_buf.subarray(i.dstate.pending_out,i.dstate.pending_out+e),i.next_out_index),i.next_out_index+=e,i.dstate.pending_out+=e,i.total_out+=e,i.avail_out-=e,i.dstate.pending-=e,i.dstate.pending===0&&(i.dstate.pending_out=0))}},self._zipjs_Deflater=Cr;var et=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],fo=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ho=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],po=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],mo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],go=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function Qn(){var i,e,n,t,r,a;function l(h,g,v,b,C,I,f,y,s,d,x){var w,m,R,S,E,U,q,z,N,D,j,Q,ae,Y,ve;D=0,E=v;do n[h[g+D]]++,D++,E--;while(E!==0);if(n[0]==v)return f[0]=-1,y[0]=0,0;for(z=y[0],U=1;U<=15&&n[U]===0;U++);for(q=U,z<U&&(z=U),E=15;E!==0&&n[E]===0;E--);for(R=E,z>E&&(z=E),y[0]=z,Y=1<<U;U<E;U++,Y<<=1)if((Y-=n[U])<0)return-3;if((Y-=n[E])<0)return-3;for(n[E]+=Y,a[1]=U=0,D=1,ae=2;--E!=0;)a[ae]=U+=n[D],ae++,D++;E=0,D=0;do(U=h[g+D])!==0&&(x[a[U]++]=E),D++;while(++E<v);for(v=a[R],a[0]=E=0,D=0,S=-1,Q=-z,r[0]=0,j=0,ve=0;q<=R;q++)for(w=n[q];w--!=0;){for(;q>Q+z;){if(S++,ve=(ve=R-(Q+=z))>z?z:ve,(m=1<<(U=q-Q))>w+1&&(m-=w+1,ae=q,U<ve))for(;++U<ve&&!((m<<=1)<=n[++ae]);)m-=n[ae];if(d[0]+(ve=1<<U)>1440)return-3;r[S]=j=d[0],d[0]+=ve,S!==0?(a[S]=E,t[0]=U,t[1]=z,t[2]=j-r[S-1]-(U=E>>>Q-z),s.set(t,3*(r[S-1]+U))):f[0]=j}for(t[1]=q-Q,D>=v?t[0]=192:x[D]<b?(t[0]=x[D]<256?0:96,t[2]=x[D++]):(t[0]=I[x[D]-b]+16+64,t[2]=C[x[D++]-b]),m=1<<q-Q,U=E>>>Q;U<ve;U+=m)s.set(t,3*(j+U));for(U=1<<q-1;(E&U)!=0;U>>>=1)E^=U;for(E^=U,N=(1<<Q)-1;(E&N)!=a[S];)S--,N=(1<<(Q-=z))-1}return Y!==0&&R!=1?-5:0}function c(h){var g;for(i||(i=[],e=[],n=new Int32Array(16),t=[],r=new Int32Array(15),a=new Int32Array(16)),e.length<h&&(e=[]),g=0;g<h;g++)e[g]=0;for(g=0;g<16;g++)n[g]=0;for(g=0;g<3;g++)t[g]=0;r.set(n.subarray(0,15),0),a.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(h,g,v,b,C){var I;return c(19),i[0]=0,(I=l(h,0,19,19,null,null,v,g,b,i,e))==-3?C.msg="oversubscribed dynamic bit lengths tree":I!=-5&&g[0]!==0||(C.msg="incomplete dynamic bit lengths tree",I=-3),I},this.inflate_trees_dynamic=function(h,g,v,b,C,I,f,y,s){var d;return c(288),i[0]=0,(d=l(v,0,h,257,po,_o,I,b,y,i,e))!=0||b[0]===0?(d==-3?s.msg="oversubscribed literal/length tree":d!=-4&&(s.msg="incomplete literal/length tree",d=-3),d):(c(288),(d=l(v,h,g,0,mo,go,f,C,y,i,e))!=0||C[0]===0&&h>257?(d==-3?s.msg="oversubscribed distance tree":d==-5?(s.msg="incomplete distance tree",d=-3):d!=-4&&(s.msg="empty distance tree with lengths",d=-3),d):0)}}function vo(){var i,e,n,t,r=this,a=0,l=0,c=0,h=0,g=0,v=0,b=0,C=0,I=0,f=0;function y(s,d,x,w,m,R,S,E){var U,q,z,N,D,j,Q,ae,Y,ve,Le,Ee,ee,Pe,le,ue;Q=E.next_in_index,ae=E.avail_in,D=S.bitb,j=S.bitk,ve=(Y=S.write)<S.read?S.read-Y-1:S.end-Y,Le=et[s],Ee=et[d];do{for(;j<20;)ae--,D|=(255&E.read_byte(Q++))<<j,j+=8;if((N=(q=x)[ue=3*((z=w)+(U=D&Le))])!==0)for(;;){if(D>>=q[ue+1],j-=q[ue+1],(16&N)!=0){for(ee=q[ue+2]+(D&et[N&=15]),D>>=N,j-=N;j<15;)ae--,D|=(255&E.read_byte(Q++))<<j,j+=8;for(N=(q=m)[ue=3*((z=R)+(U=D&Ee))];;){if(D>>=q[ue+1],j-=q[ue+1],(16&N)!=0){for(N&=15;j<N;)ae--,D|=(255&E.read_byte(Q++))<<j,j+=8;if(Pe=q[ue+2]+(D&et[N]),D>>=N,j-=N,ve-=ee,Y>=Pe)Y-(le=Y-Pe)>0&&2>Y-le?(S.window[Y++]=S.window[le++],S.window[Y++]=S.window[le++],ee-=2):(S.window.set(S.window.subarray(le,le+2),Y),Y+=2,le+=2,ee-=2);else{le=Y-Pe;do le+=S.end;while(le<0);if(ee>(N=S.end-le)){if(ee-=N,Y-le>0&&N>Y-le)do S.window[Y++]=S.window[le++];while(--N!=0);else S.window.set(S.window.subarray(le,le+N),Y),Y+=N,le+=N,N=0;le=0}}if(Y-le>0&&ee>Y-le)do S.window[Y++]=S.window[le++];while(--ee!=0);else S.window.set(S.window.subarray(le,le+ee),Y),Y+=ee,le+=ee,ee=0;break}if((64&N)!=0)return E.msg="invalid distance code",ae+=ee=j>>3<(ee=E.avail_in-ae)?j>>3:ee,Q-=ee,j-=ee<<3,S.bitb=D,S.bitk=j,E.avail_in=ae,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,S.write=Y,-3;U+=q[ue+2],N=q[ue=3*(z+(U+=D&et[N]))]}break}if((64&N)!=0)return(32&N)!=0?(ae+=ee=j>>3<(ee=E.avail_in-ae)?j>>3:ee,Q-=ee,j-=ee<<3,S.bitb=D,S.bitk=j,E.avail_in=ae,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,S.write=Y,1):(E.msg="invalid literal/length code",ae+=ee=j>>3<(ee=E.avail_in-ae)?j>>3:ee,Q-=ee,j-=ee<<3,S.bitb=D,S.bitk=j,E.avail_in=ae,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,S.write=Y,-3);if(U+=q[ue+2],(N=q[ue=3*(z+(U+=D&et[N]))])===0){D>>=q[ue+1],j-=q[ue+1],S.window[Y++]=q[ue+2],ve--;break}}else D>>=q[ue+1],j-=q[ue+1],S.window[Y++]=q[ue+2],ve--}while(ve>=258&&ae>=10);return ae+=ee=j>>3<(ee=E.avail_in-ae)?j>>3:ee,Q-=ee,j-=ee<<3,S.bitb=D,S.bitk=j,E.avail_in=ae,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,S.write=Y,0}r.init=function(s,d,x,w,m,R){i=0,b=s,C=d,n=x,I=w,t=m,f=R,e=null},r.proc=function(s,d,x){var w,m,R,S,E,U,q,z=0,N=0,D=0;for(D=d.next_in_index,S=d.avail_in,z=s.bitb,N=s.bitk,U=(E=s.write)<s.read?s.read-E-1:s.end-E;;)switch(i){case 0:if(U>=258&&S>=10&&(s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,x=y(b,C,n,I,t,f,s,d),D=d.next_in_index,S=d.avail_in,z=s.bitb,N=s.bitk,U=(E=s.write)<s.read?s.read-E-1:s.end-E,x!=0)){i=x==1?7:9;break}c=b,e=n,l=I,i=1;case 1:for(w=c;N<w;){if(S===0)return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);x=0,S--,z|=(255&d.read_byte(D++))<<N,N+=8}if(z>>>=e[1+(m=3*(l+(z&et[w])))],N-=e[m+1],(R=e[m])===0){h=e[m+2],i=6;break}if((16&R)!=0){g=15&R,a=e[m+2],i=2;break}if((64&R)==0){c=R,l=m/3+e[m+2];break}if((32&R)!=0){i=7;break}return i=9,d.msg="invalid literal/length code",x=-3,s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);case 2:for(w=g;N<w;){if(S===0)return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);x=0,S--,z|=(255&d.read_byte(D++))<<N,N+=8}a+=z&et[w],z>>=w,N-=w,c=C,e=t,l=f,i=3;case 3:for(w=c;N<w;){if(S===0)return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);x=0,S--,z|=(255&d.read_byte(D++))<<N,N+=8}if(z>>=e[1+(m=3*(l+(z&et[w])))],N-=e[m+1],(16&(R=e[m]))!=0){g=15&R,v=e[m+2],i=4;break}if((64&R)==0){c=R,l=m/3+e[m+2];break}return i=9,d.msg="invalid distance code",x=-3,s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);case 4:for(w=g;N<w;){if(S===0)return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);x=0,S--,z|=(255&d.read_byte(D++))<<N,N+=8}v+=z&et[w],z>>=w,N-=w,i=5;case 5:for(q=E-v;q<0;)q+=s.end;for(;a!==0;){if(U===0&&(E==s.end&&s.read!==0&&(U=(E=0)<s.read?s.read-E-1:s.end-E),U===0&&(s.write=E,x=s.inflate_flush(d,x),U=(E=s.write)<s.read?s.read-E-1:s.end-E,E==s.end&&s.read!==0&&(U=(E=0)<s.read?s.read-E-1:s.end-E),U===0)))return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);s.window[E++]=s.window[q++],U--,q==s.end&&(q=0),a--}i=0;break;case 6:if(U===0&&(E==s.end&&s.read!==0&&(U=(E=0)<s.read?s.read-E-1:s.end-E),U===0&&(s.write=E,x=s.inflate_flush(d,x),U=(E=s.write)<s.read?s.read-E-1:s.end-E,E==s.end&&s.read!==0&&(U=(E=0)<s.read?s.read-E-1:s.end-E),U===0)))return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);x=0,s.window[E++]=h,U--,i=0;break;case 7:if(N>7&&(N-=8,S++,D--),s.write=E,x=s.inflate_flush(d,x),U=(E=s.write)<s.read?s.read-E-1:s.end-E,s.read!=s.write)return s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);i=8;case 8:return x=1,s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);case 9:return x=-3,s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x);default:return x=-2,s.bitb=z,s.bitk=N,d.avail_in=S,d.total_in+=D-d.next_in_index,d.next_in_index=D,s.write=E,s.inflate_flush(d,x)}},r.free=function(){}}Qn.inflate_trees_fixed=function(i,e,n,t){return i[0]=9,e[0]=5,n[0]=fo,t[0]=ho,0};var Wi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function bo(i,e){var n,t=this,r=0,a=0,l=0,c=0,h=[0],g=[0],v=new vo,b=0,C=new Int32Array(4320),I=new Qn;t.bitk=0,t.bitb=0,t.window=new Uint8Array(e),t.end=e,t.read=0,t.write=0,t.reset=function(f,y){y&&(y[0]=0),r==6&&v.free(f),r=0,t.bitk=0,t.bitb=0,t.read=t.write=0},t.reset(i,null),t.inflate_flush=function(f,y){var s,d,x;return d=f.next_out_index,(s=((x=t.read)<=t.write?t.write:t.end)-x)>f.avail_out&&(s=f.avail_out),s!==0&&y==-5&&(y=0),f.avail_out-=s,f.total_out+=s,f.next_out.set(t.window.subarray(x,x+s),d),d+=s,(x+=s)==t.end&&(x=0,t.write==t.end&&(t.write=0),(s=t.write-x)>f.avail_out&&(s=f.avail_out),s!==0&&y==-5&&(y=0),f.avail_out-=s,f.total_out+=s,f.next_out.set(t.window.subarray(x,x+s),d),d+=s,x+=s),f.next_out_index=d,t.read=x,y},t.proc=function(f,y){var s,d,x,w,m,R,S,E;for(w=f.next_in_index,m=f.avail_in,d=t.bitb,x=t.bitk,S=(R=t.write)<t.read?t.read-R-1:t.end-R;;)switch(r){case 0:for(;x<3;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}switch(b=1&(s=7&d),s>>>1){case 0:d>>>=3,d>>>=s=7&(x-=3),x-=s,r=1;break;case 1:var U=[],q=[],z=[[]],N=[[]];Qn.inflate_trees_fixed(U,q,z,N),v.init(U[0],q[0],z[0],0,N[0],0),d>>>=3,x-=3,r=6;break;case 2:d>>>=3,x-=3,r=3;break;case 3:return d>>>=3,x-=3,r=9,f.msg="invalid block type",y=-3,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y)}break;case 1:for(;x<32;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}if((~d>>>16&65535)!=(65535&d))return r=9,f.msg="invalid stored block lengths",y=-3,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);a=65535&d,d=x=0,r=a!==0?2:b!==0?7:0;break;case 2:if(m===0||S===0&&(R==t.end&&t.read!==0&&(S=(R=0)<t.read?t.read-R-1:t.end-R),S===0&&(t.write=R,y=t.inflate_flush(f,y),S=(R=t.write)<t.read?t.read-R-1:t.end-R,R==t.end&&t.read!==0&&(S=(R=0)<t.read?t.read-R-1:t.end-R),S===0)))return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);if(y=0,(s=a)>m&&(s=m),s>S&&(s=S),t.window.set(f.read_buf(w,s),R),w+=s,m-=s,R+=s,S-=s,(a-=s)!=0)break;r=b!==0?7:0;break;case 3:for(;x<14;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}if(l=s=16383&d,(31&s)>29||(s>>5&31)>29)return r=9,f.msg="too many length or distance symbols",y=-3,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);if(s=258+(31&s)+(s>>5&31),!n||n.length<s)n=[];else for(E=0;E<s;E++)n[E]=0;d>>>=14,x-=14,c=0,r=4;case 4:for(;c<4+(l>>>10);){for(;x<3;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}n[Wi[c++]]=7&d,d>>>=3,x-=3}for(;c<19;)n[Wi[c++]]=0;if(h[0]=7,(s=I.inflate_trees_bits(n,h,g,C,f))!=0)return(y=s)==-3&&(n=null,r=9),t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);c=0,r=5;case 5:for(;!(c>=258+(31&(s=l))+(s>>5&31));){var D,j;for(s=h[0];x<s;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}if((j=C[3*(g[0]+(d&et[s=C[3*(g[0]+(d&et[s]))+1]]))+2])<16)d>>>=s,x-=s,n[c++]=j;else{for(E=j==18?7:j-14,D=j==18?11:3;x<s+E;){if(m===0)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);y=0,m--,d|=(255&f.read_byte(w++))<<x,x+=8}if(x-=s,D+=(d>>>=s)&et[E],d>>>=E,x-=E,(E=c)+D>258+(31&(s=l))+(s>>5&31)||j==16&&E<1)return n=null,r=9,f.msg="invalid bit length repeat",y=-3,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);j=j==16?n[E-1]:0;do n[E++]=j;while(--D!=0);c=E}}g[0]=-1;var Q=[],ae=[],Y=[],ve=[];if(Q[0]=9,ae[0]=6,(s=I.inflate_trees_dynamic(257+(31&(s=l)),1+(s>>5&31),n,Q,ae,Y,ve,C,f))!=0)return s==-3&&(n=null,r=9),y=s,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);v.init(Q[0],ae[0],C,Y[0],C,ve[0]),r=6;case 6:if(t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,(y=v.proc(t,f,y))!=1)return t.inflate_flush(f,y);if(y=0,v.free(f),w=f.next_in_index,m=f.avail_in,d=t.bitb,x=t.bitk,S=(R=t.write)<t.read?t.read-R-1:t.end-R,b===0){r=0;break}r=7;case 7:if(t.write=R,y=t.inflate_flush(f,y),S=(R=t.write)<t.read?t.read-R-1:t.end-R,t.read!=t.write)return t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);r=8;case 8:return y=1,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);case 9:return y=-3,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y);default:return y=-2,t.bitb=d,t.bitk=x,f.avail_in=m,f.total_in+=w-f.next_in_index,f.next_in_index=w,t.write=R,t.inflate_flush(f,y)}},t.free=function(f){t.reset(f,null),t.window=null,C=null},t.set_dictionary=function(f,y,s){t.window.set(f.subarray(y,y+s),0),t.read=t.write=s},t.sync_point=function(){return r==1?1:0}}var wo=[0,0,255,255];function yo(){var i=this;function e(n){return n&&n.istate?(n.total_in=n.total_out=0,n.msg=null,n.istate.mode=7,n.istate.blocks.reset(n,null),0):-2}i.mode=0,i.method=0,i.was=[0],i.need=0,i.marker=0,i.wbits=0,i.inflateEnd=function(n){return i.blocks&&i.blocks.free(n),i.blocks=null,0},i.inflateInit=function(n,t){return n.msg=null,i.blocks=null,t<8||t>15?(i.inflateEnd(n),-2):(i.wbits=t,n.istate.blocks=new bo(n,1<<t),e(n),0)},i.inflate=function(n,t){var r,a;if(!n||!n.istate||!n.next_in)return-2;for(t=t==4?-5:0,r=-5;;)switch(n.istate.mode){case 0:if(n.avail_in===0)return r;if(r=t,n.avail_in--,n.total_in++,(15&(n.istate.method=n.read_byte(n.next_in_index++)))!=8){n.istate.mode=13,n.msg="unknown compression method",n.istate.marker=5;break}if(8+(n.istate.method>>4)>n.istate.wbits){n.istate.mode=13,n.msg="invalid window size",n.istate.marker=5;break}n.istate.mode=1;case 1:if(n.avail_in===0)return r;if(r=t,n.avail_in--,n.total_in++,a=255&n.read_byte(n.next_in_index++),((n.istate.method<<8)+a)%31!=0){n.istate.mode=13,n.msg="incorrect header check",n.istate.marker=5;break}if((32&a)==0){n.istate.mode=7;break}n.istate.mode=2;case 2:if(n.avail_in===0)return r;r=t,n.avail_in--,n.total_in++,n.istate.need=(255&n.read_byte(n.next_in_index++))<<24&4278190080,n.istate.mode=3;case 3:if(n.avail_in===0)return r;r=t,n.avail_in--,n.total_in++,n.istate.need+=(255&n.read_byte(n.next_in_index++))<<16&16711680,n.istate.mode=4;case 4:if(n.avail_in===0)return r;r=t,n.avail_in--,n.total_in++,n.istate.need+=(255&n.read_byte(n.next_in_index++))<<8&65280,n.istate.mode=5;case 5:return n.avail_in===0?r:(r=t,n.avail_in--,n.total_in++,n.istate.need+=255&n.read_byte(n.next_in_index++),n.istate.mode=6,2);case 6:return n.istate.mode=13,n.msg="need dictionary",n.istate.marker=0,-2;case 7:if((r=n.istate.blocks.proc(n,r))==-3){n.istate.mode=13,n.istate.marker=0;break}if(r==0&&(r=t),r!=1)return r;r=t,n.istate.blocks.reset(n,n.istate.was),n.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},i.inflateSetDictionary=function(n,t,r){var a=0,l=r;return n&&n.istate&&n.istate.mode==6?(l>=1<<n.istate.wbits&&(a=r-(l=(1<<n.istate.wbits)-1)),n.istate.blocks.set_dictionary(t,a,l),n.istate.mode=7,0):-2},i.inflateSync=function(n){var t,r,a,l,c;if(!n||!n.istate)return-2;if(n.istate.mode!=13&&(n.istate.mode=13,n.istate.marker=0),(t=n.avail_in)===0)return-5;for(r=n.next_in_index,a=n.istate.marker;t!==0&&a<4;)n.read_byte(r)==wo[a]?a++:a=n.read_byte(r)!==0?0:4-a,r++,t--;return n.total_in+=r-n.next_in_index,n.next_in_index=r,n.avail_in=t,n.istate.marker=a,a!=4?-3:(l=n.total_in,c=n.total_out,e(n),n.total_in=l,n.total_out=c,n.istate.mode=7,0)},i.inflateSyncPoint=function(n){return n&&n.istate&&n.istate.blocks?n.istate.blocks.sync_point():-2}}function Sr(){}function kr(){var i=new Sr,e=new Uint8Array(512),n=!1;i.inflateInit(),i.next_out=e,this.append=function(t,r){var a,l,c=[],h=0,g=0,v=0;if(t.length!==0){i.next_in_index=0,i.next_in=t,i.avail_in=t.length;do{if(i.next_out_index=0,i.avail_out=512,i.avail_in!==0||n||(i.next_in_index=0,n=!0),a=i.inflate(0),n&&a===-5){if(i.avail_in!==0)throw new Error("inflating: bad input")}else if(a!==0&&a!==1)throw new Error("inflating: "+i.msg);if((n||a===1)&&i.avail_in===t.length)throw new Error("inflating: bad input");i.next_out_index&&c.push(i.next_out_index===512?new Uint8Array(e):new Uint8Array(e.subarray(0,i.next_out_index))),v+=i.next_out_index,r&&i.next_in_index>0&&i.next_in_index!=h&&(r(i.next_in_index),h=i.next_in_index)}while(i.avail_in>0||i.avail_out===0);return l=new Uint8Array(v),c.forEach(function(b){l.set(b,g),g+=b.length}),l}},this.flush=function(){i.inflateEnd()}}Sr.prototype={inflateInit:function(i){var e=this;return e.istate=new yo,i||(i=15),e.istate.inflateInit(e,i)},inflate:function(i){var e=this;return e.istate?e.istate.inflate(e,i):-2},inflateEnd:function(){var i=this;if(!i.istate)return-2;var e=i.istate.inflateEnd(i);return i.istate=null,e},inflateSync:function(){var i=this;return i.istate?i.istate.inflateSync(i):-2},inflateSetDictionary:function(i,e){var n=this;return n.istate?n.istate.inflateSetDictionary(n,i,e):-2},read_byte:function(i){return this.next_in.subarray(i,i+1)[0]},read_buf:function(i,e){return this.next_in.subarray(i,i+e)}},self._zipjs_Inflater=kr;var pi,nn="File format is not recognized.",ji="Error while reading zip file.";try{pi=new Blob([new DataView(new ArrayBuffer(0))]).size===0}catch{}function kn(){this.crc=-1}function ei(){}function Ct(i,e){var n,t;return n=new ArrayBuffer(i),t=new Uint8Array(n),e&&t.set(e,0),{buffer:n,array:t,view:new DataView(n)}}function An(){}function ti(i){var e,n=this;n.size=0,n.init=function(t,r){var a=new Blob([i],{type:"text/plain"});(e=new Ln(a)).init(function(){n.size=e.size,t()},r)},n.readUint8Array=function(t,r,a,l){e.readUint8Array(t,r,a,l)}}function ni(i){var e,n=this;n.size=0,n.init=function(t){for(var r=i.length;i.charAt(r-1)=="=";)r--;e=i.indexOf(",")+1,n.size=Math.floor(.75*(r-e)),t()},n.readUint8Array=function(t,r,a){var l,c=Ct(r),h=4*Math.floor(t/3),g=4*Math.ceil((t+r)/3),v=self.atob(i.substring(h+e,g+e)),b=t-3*Math.floor(h/4);for(l=b;l<b+r;l++)c.array[l-b]=v.charCodeAt(l);a(c.array)}}function Ln(i){var e=this;e.size=0,e.init=function(n){e.size=i.size,n()},e.readUint8Array=function(n,t,r,a){var l=new FileReader;l.onload=function(c){r(new Uint8Array(c.target.result))},l.onerror=a;try{l.readAsArrayBuffer((function(c,h,g){if(h<0||g<0||h+g>c.size)throw new RangeError("offset:"+h+", length:"+g+", size:"+c.size);return c.slice?c.slice(h,h+g):c.webkitSlice?c.webkitSlice(h,h+g):c.mozSlice?c.mozSlice(h,h+g):c.msSlice?c.msSlice(h,h+g):void 0})(i,n,t))}catch(c){a(c)}}}function an(){}function ii(i){var e,n=this;n.init=function(t){e=new Blob([],{type:"text/plain"}),t()},n.writeUint8Array=function(t,r){e=new Blob([e,pi?t:t.buffer],{type:"text/plain"}),r()},n.getData=function(t,r){var a=new FileReader;a.onload=function(l){t(l.target.result)},a.onerror=r,a.readAsText(e,i)}}function ri(i){var e=this,n="",t="";e.init=function(r){n+="data:"+(i||"")+";base64,",r()},e.writeUint8Array=function(r,a){var l,c=t.length,h=t;for(t="",l=0;l<3*Math.floor((c+r.length)/3)-c;l++)h+=String.fromCharCode(r[l]);for(;l<r.length;l++)t+=String.fromCharCode(r[l]);h.length>2?n+=self.btoa(h):t=h,a()},e.getData=function(r){r(n+self.btoa(t))}}function ai(i){var e,n=this;n.init=function(t){e=new Blob([],{type:i}),t()},n.writeUint8Array=function(t,r){e=new Blob([e,pi?t:t.buffer],{type:i}),r()},n.getData=function(t){t(e)}}function oi(i,e,n,t,r,a,l,c,h,g){var v,b,C,I=0,f=e.sn;function y(){i.removeEventListener("message",s,!1),c(b,C)}function s(x){var w=x.data,m=w.data,R=w.error;if(R)return R.toString=function(){return"Error: "+this.message},void h(R);if(w.sn===f)switch(typeof w.codecTime=="number"&&(i.codecTime+=w.codecTime),typeof w.crcTime=="number"&&(i.crcTime+=w.crcTime),w.type){case"append":m?(b+=m.length,t.writeUint8Array(m,function(){d()},g)):d();break;case"flush":C=w.crc,m?(b+=m.length,t.writeUint8Array(m,function(){y()},g)):y();break;case"progress":l&&l(v+w.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",w)}}function d(){(v=524288*I)<=a?n.readUint8Array(r+v,Math.min(524288,a-v),function(x){l&&l(v,a);var w=v===0?e:{sn:f};w.type="append",w.data=x;try{i.postMessage(w,[x.buffer])}catch{i.postMessage(w)}I++},h):i.postMessage({sn:f,type:"flush"})}b=0,i.addEventListener("message",s,!1),d()}function si(i,e,n,t,r,a,l,c,h,g){var v,b=0,C=0,I=a==="input",f=a==="output",y=new kn;(function s(){var d;if((v=524288*b)<r)e.readUint8Array(t+v,Math.min(524288,r-v),function(x){var w;try{w=i.append(x,function(m){l&&l(v+m,r)})}catch(m){return void h(m)}w?(C+=w.length,n.writeUint8Array(w,function(){b++,setTimeout(s,1)},g),f&&y.append(w)):(b++,setTimeout(s,1)),I&&y.append(x),l&&l(v,r)},h);else{try{d=i.flush()}catch(x){return void h(x)}d?(f&&y.append(d),C+=d.length,n.writeUint8Array(d,function(){c(C,y.get())},g)):c(C,y.get())}})()}function Yi(i,e,n,t,r,a,l,c,h,g,v){var b="input";Ce.useWebWorkers&&l?oi(i,{sn:e,codecClass:"_zipjs_NOOP",crcType:b},n,t,r,a,h,c,g,v):si(new ei,n,t,r,a,b,h,c,g,v)}function Xi(i){var e,n,t="",r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];for(e=0;e<i.length;e++)t+=(n=255&i.charCodeAt(e))>127?r[n-128]:String.fromCharCode(n);return t}function $i(i){return decodeURIComponent(escape(i))}function Ki(i){var e,n="";for(e=0;e<i.length;e++)n+=String.fromCharCode(i[e]);return n}function qi(i,e,n,t,r){i.version=e.view.getUint16(n,!0),i.bitFlag=e.view.getUint16(n+2,!0),i.compressionMethod=e.view.getUint16(n+4,!0),i.lastModDateRaw=e.view.getUint32(n+6,!0),i.lastModDate=(function(a){var l=(4294901760&a)>>16,c=65535&a;try{return new Date(1980+((65024&l)>>9),((480&l)>>5)-1,31&l,(63488&c)>>11,(2016&c)>>5,2*(31&c),0)}catch{}})(i.lastModDateRaw),(1&i.bitFlag)!=1?((t||(8&i.bitFlag)!=8)&&(i.crc32=e.view.getUint32(n+10,!0),i.compressedSize=e.view.getUint32(n+14,!0),i.uncompressedSize=e.view.getUint32(n+18,!0)),i.compressedSize!==4294967295&&i.uncompressedSize!==4294967295?(i.filenameLength=e.view.getUint16(n+22,!0),i.extraFieldLength=e.view.getUint16(n+24,!0)):r("File is using Zip64 (4gb+ file size).")):r("File contains encrypted entry.")}function Ji(i){return unescape(encodeURIComponent(i))}function Qi(i){var e,n=[];for(e=0;e<i.length;e++)n.push(i.charCodeAt(e));return n}kn.prototype.append=function(i){for(var e=0|this.crc,n=this.table,t=0,r=0|i.length;t<r;t++)e=e>>>8^n[255&(e^i[t])];this.crc=e},kn.prototype.get=function(){return~this.crc},kn.prototype.table=(function(){var i,e,n,t=[];for(i=0;i<256;i++){for(n=i,e=0;e<8;e++)1&n?n=n>>>1^3988292384:n>>>=1;t[i]=n}return t})(),ei.prototype.append=function(i,e){return i},ei.prototype.flush=function(){},(ti.prototype=new An).constructor=ti,(ni.prototype=new An).constructor=ni,(Ln.prototype=new An).constructor=Ln,an.prototype.getData=function(i){i(this.data)},(ii.prototype=new an).constructor=ii,(ri.prototype=new an).constructor=ri,(ai.prototype=new an).constructor=ai;var xo={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function er(i,e,n){if(Ce.workerScripts===null||Ce.workerScriptsPath===null){var t,r,a;if(Ce.workerScripts){if(t=Ce.workerScripts[i],!Array.isArray(t))return void n(new Error("zip.workerScripts."+i+" is not an array!"));r=t,a=document.createElement("a"),t=r.map(function(h){return a.href=h,a.href})}else(t=xo[i].slice(0))[0]=(Ce.workerScriptsPath||"")+t[0];var l=new Worker(t[0]);l.codecTime=l.crcTime=0,l.postMessage({type:"importScripts",scripts:t.slice(1)}),l.addEventListener("message",function h(g){var v=g.data;if(v.error)return l.terminate(),void n(v.error);v.type==="importScripts"&&(l.removeEventListener("message",h),l.removeEventListener("error",c),e(l))}),l.addEventListener("error",c)}else n(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function c(h){l.terminate(),n(h)}}function tr(i){console.error(i)}const Ce={Reader:An,Writer:an,BlobReader:Ln,Data64URIReader:ni,TextReader:ti,BlobWriter:ai,Data64URIWriter:ri,TextWriter:ii,createReader:function(i,e,n){i.init(function(){(function(t,r,a){var l=0;function c(){}c.prototype.getData=function(g,v,b,C){var I=this;function f(d,x){C&&!(function(w){var m=Ct(4);return m.view.setUint32(0,w),I.crc32==m.view.getUint32(0)})(x)?a("CRC failed."):g.getData(function(w){v(w)})}function y(d){a(d||"Error while reading file data.")}function s(d){a(d||"Error while writing file data.")}t.readUint8Array(I.offset,30,function(d){var x,w=Ct(d.length,d);w.view.getUint32(0)==1347093252?(qi(I,w,4,!1,a),x=I.offset+30+I.filenameLength+I.extraFieldLength,g.init(function(){I.compressionMethod===0?Yi(I._worker,l++,t,g,x,I.compressedSize,C,f,b,y,s):(function(m,R,S,E,U,q,z,N,D,j,Q){var ae=z?"output":"none";Ce.useWebWorkers?oi(m,{sn:R,codecClass:"_zipjs_Inflater",crcType:ae},S,E,U,q,D,N,j,Q):si(new kr,S,E,U,q,ae,D,N,j,Q)})(I._worker,l++,t,g,x,I.compressedSize,C,f,b,y,s)},s)):a(nn)},y)};var h={getEntries:function(g){var v=this._worker;(function(b){function C(I,f){t.readUint8Array(t.size-I,I,function(y){for(var s=y.length-22;s>=0;s--)if(y[s]===80&&y[s+1]===75&&y[s+2]===5&&y[s+3]===6)return void b(new DataView(y.buffer,s,22));f()},function(){a(ji)})}t.size<22?a(nn):C(22,function(){C(Math.min(65558,t.size),function(){a(nn)})})})(function(b){var C,I;C=b.getUint32(16,!0),I=b.getUint16(8,!0),C<0||C>=t.size?a(nn):t.readUint8Array(C,t.size-C,function(f){var y,s,d,x,w=0,m=[],R=Ct(f.length,f);for(y=0;y<I;y++){if((s=new c)._worker=v,R.view.getUint32(w)!=1347092738)return void a(nn);qi(s,R,w+6,!0,a),s.commentLength=R.view.getUint16(w+32,!0),s.directory=(16&R.view.getUint8(w+38))==16,s.offset=R.view.getUint32(w+42,!0),d=Ki(R.array.subarray(w+46,w+46+s.filenameLength)),s.filename=(2048&s.bitFlag)==2048?$i(d):Xi(d),s.directory||s.filename.charAt(s.filename.length-1)!="/"||(s.directory=!0),x=Ki(R.array.subarray(w+46+s.filenameLength+s.extraFieldLength,w+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=(2048&s.bitFlag)==2048?$i(x):Xi(x),m.push(s),w+=46+s.filenameLength+s.extraFieldLength+s.commentLength}g(m)},function(){a(ji)})})},close:function(g){this._worker&&(this._worker.terminate(),this._worker=null),g&&g()},_worker:null};Ce.useWebWorkers?er("inflater",function(g){h._worker=g,r(h)},function(g){a(g)}):r(h)})(i,e,n)},n=n||tr)},createWriter:function(i,e,n,t){t=!!t,i.init(function(){(function(r,a,l,c){var h={},g=[],v=0,b=0;function C(y){l(y||"Error while writing zip file.")}function I(y){l(y||"Error while reading file data.")}var f={add:function(y,s,d,x,w){var m,R,S,E=this._worker;function U(z,N){var D=Ct(16);v+=z||0,D.view.setUint32(0,1347094280),N!==void 0&&(m.view.setUint32(10,N,!0),D.view.setUint32(4,N,!0)),s&&(D.view.setUint32(8,z,!0),m.view.setUint32(14,z,!0),D.view.setUint32(12,s.size,!0),m.view.setUint32(18,s.size,!0)),r.writeUint8Array(D.array,function(){v+=16,d()},C)}function q(){var z;w=w||{},y=y.trim(),w.directory&&y.charAt(y.length-1)!="/"&&(y+="/"),h.hasOwnProperty(y)?l("File already exists."):(R=Qi(Ji(y)),g.push(y),S=w.lastModDate||new Date,m=Ct(26),h[y]={headerArray:m.array,directory:w.directory,filename:R,offset:v,comment:Qi(Ji(w.comment||""))},m.view.setUint32(0,335546376),w.version&&m.view.setUint8(0,w.version),c||w.level===0||w.directory||m.view.setUint16(4,2048),m.view.setUint16(6,(S.getHours()<<6|S.getMinutes())<<5|S.getSeconds()/2,!0),m.view.setUint16(8,(S.getFullYear()-1980<<4|S.getMonth()+1)<<5|S.getDate(),!0),m.view.setUint16(22,R.length,!0),(z=Ct(30+R.length)).view.setUint32(0,1347093252),z.array.set(m.array,4),z.array.set(R,30),v+=z.array.length,r.writeUint8Array(z.array,function(){s?c||w.level===0?Yi(E,b++,s,r,0,s.size,!0,U,x,I,C):(function(N,D,j,Q,ae,Y,ve,Le,Ee){var ee="input";Ce.useWebWorkers?oi(N,{sn:D,options:{level:ae},codecClass:"_zipjs_Deflater",crcType:ee},j,Q,0,j.size,ve,Y,Le,Ee):si(new Cr,j,Q,0,j.size,ee,ve,Y,Le,Ee)})(E,b++,s,r,w.level,U,x,I,C):U()},C))}s?s.init(q,I):q()},close:function(y){this._worker&&(this._worker.terminate(),this._worker=null);var s,d,x,w=0,m=0;for(d=0;d<g.length;d++)w+=46+(x=h[g[d]]).filename.length+x.comment.length;for(s=Ct(w+22),d=0;d<g.length;d++)x=h[g[d]],s.view.setUint32(m,1347092738),s.view.setUint16(m+4,5120),s.array.set(x.headerArray,m+6),s.view.setUint16(m+32,x.comment.length,!0),x.directory&&s.view.setUint8(m+38,16),s.view.setUint32(m+42,x.offset,!0),s.array.set(x.filename,m+46),s.array.set(x.comment,m+46+x.filename.length),m+=46+x.filename.length+x.comment.length;s.view.setUint32(m,1347093766),s.view.setUint16(m+8,g.length,!0),s.view.setUint16(m+10,g.length,!0),s.view.setUint32(m+12,w,!0),s.view.setUint32(m+16,v,!0),r.writeUint8Array(s.array,function(){r.getData(y)},C)},_worker:null};Ce.useWebWorkers?er("deflater",function(y){f._worker=y,a(f)},function(y){l(y)}):a(f)})(i,e,n,t)},n=n||tr)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null};var Vt,Fe,Zn=Ce.TextWriter,Tn=Ce.BlobWriter,Gn=Ce.Data64URIWriter,nr=Ce.TextReader,li=Ce.BlobReader,ir=Ce.Data64URIReader,Eo=Ce.createReader,Co=Ce.createWriter;function Sn(i){var e,n=this;n.size=0,n.init=function(t){n.size=i.uncompressedSize,t()},n.readUint8Array=function(t,r,a,l){(function(c){n.data?c():i.getData(new Tn,function(h){n.data=h,e=new li(h),c()},null,n.checkCrc32)})(function(){e.readUint8Array(t,r,a,l)})}}function rr(i){var e=0;return(function n(t){e+=t.uncompressedSize||0,t.children.forEach(n)})(i),e}function ci(i,e,n){var t=0;function r(){++t<i.children.length?a(i.children[t]):e()}function a(l){l.directory?ci(l,r,n):(l.reader=new l.Reader(l.data,n),l.reader.init(function(){l.uncompressedSize=l.reader.size,r()}))}i.children.length?a(i.children[t]):e()}function ar(i){var e=i.parent.children;e.forEach(function(n,t){n.id==i.id&&e.splice(t,1)})}function Rn(i){i.entries=[],i.root=new dn(i)}function Wt(i,e,n,t){if(i.directory)return t?new dn(i.fs,e,n,i):new ui(i.fs,e,n,i);throw"Parent entry is not a directory."}function Kt(){}function ui(i,e,n,t){var r=this;Kt.prototype.init.call(r,i,e,n,t),r.Reader=n.Reader,r.Writer=n.Writer,r.data=n.data,n.getData&&(r.getData=n.getData)}function dn(i,e,n,t){Kt.prototype.init.call(this,i,e,n,t),this.directory=!0}function Ar(){Rn(this)}(Sn.prototype=new Ce.Reader).constructor=Sn,Sn.prototype.checkCrc32=!1,(Kt.prototype={init:function(i,e,n,t){var r=this;if(i.root&&t&&t.getChildByName(e))throw"Entry filename already exists.";n||(n={}),r.fs=i,r.name=e,r.id=i.entries.length,r.parent=t,r.children=[],r.zipVersion=n.zipVersion||20,r.uncompressedSize=0,i.entries.push(r),t&&r.parent.children.push(r)},getFileEntry:function(i,e,n,t,r){var a=this;ci(a,function(){(function(l,c,h,g,v,b,C){var I=0;c.directory?(function f(y,s,d,x,w,m){var R=0;(function S(){var E=s.children[R];E?(function(U){function q(z){I+=U.uncompressedSize||0,f(z,U,function(){R++,S()},x,w,m)}U.directory?y.getDirectory(U.name,{create:!0},q,w):y.getFile(U.name,{create:!0},function(z){U.getData(new Ce.FileWriter(z,Ce.getMimeType(U.name)),q,function(N){x&&x(I+N,m)},C)},w)})(E):d()})()})(l,c,h,g,v,b):c.getData(new Ce.FileWriter(l,Ce.getMimeType(c.name)),h,g,C)})(i,a,e,n,t,rr(a),r)},t)},moveTo:function(i){var e=this;if(!i.directory)throw"Target entry is not a directory.";if(i.isDescendantOf(e))throw"Entry is a ancestor of target entry.";if(e!=i){if(i.getChildByName(e.name))throw"Entry filename already exists.";ar(e),e.parent=i,i.children.push(e)}},getFullname:function(){for(var i=this.name,e=this.parent;e;)i=(e.name?e.name+"/":"")+i,e=e.parent;return i},isDescendantOf:function(i){for(var e=this.parent;e&&e.id!=i.id;)e=e.parent;return!!e}}).constructor=Kt,ui.prototype=Vt=new Kt,Vt.constructor=ui,Vt.getData=function(i,e,n,t){var r=this;!i||i.constructor==r.Writer&&r.data?e(r.data):(r.reader||(r.reader=new r.Reader(r.data,t)),r.reader.init(function(){i.init(function(){(function(a,l,c,h,g){var v=0;(function b(){var C=524288*v;h&&h(C,a.size),C<a.size?a.readUint8Array(C,Math.min(524288,a.size-C),function(I){l.writeUint8Array(new Uint8Array(I),function(){v++,b()})},g):l.getData(c)})()})(r.reader,i,e,n,t)},t)}))},Vt.getText=function(i,e,n,t){this.getData(new Zn(t),i,e,n)},Vt.getBlob=function(i,e,n,t){this.getData(new Tn(i),e,n,t)},Vt.getData64URI=function(i,e,n,t){this.getData(new Gn(i),e,n,t)},dn.prototype=Fe=new Kt,Fe.constructor=dn,Fe.addDirectory=function(i){return Wt(this,i,null,!0)},Fe.addText=function(i,e){return Wt(this,i,{data:e,Reader:nr,Writer:Zn})},Fe.addBlob=function(i,e){return Wt(this,i,{data:e,Reader:li,Writer:Tn})},Fe.addData64URI=function(i,e){return Wt(this,i,{data:e,Reader:ir,Writer:Gn})},Fe.addFileEntry=function(i,e,n){(function(t,r,a,l){r.isDirectory?(function c(h,g,v){(function(b,C){b.isDirectory&&b.createReader().readEntries(C),b.isFile&&C([])})(g,function(b){var C=0;(function I(){var f=b[C];f?(function(y){function s(d){c(d,y,function(){C++,I()})}y.isDirectory&&s(h.addDirectory(y.name)),y.isFile&&y.file(function(d){var x=h.addBlob(y.name,d);x.uncompressedSize=d.size,s(x)},l)})(f):v()})()})})(t,r,a):r.file(function(c){t.addBlob(r.name,c),a()},l)})(this,i,e,n)},Fe.addData=function(i,e){return Wt(this,i,e)},Fe.importBlob=function(i,e,n){this.importZip(new li(i),e,n)},Fe.importText=function(i,e,n){this.importZip(new nr(i),e,n)},Fe.importData64URI=function(i,e,n){this.importZip(new ir(i),e,n)},Fe.exportBlob=function(i,e,n){this.exportZip(new Tn("application/zip"),i,e,n)},Fe.exportText=function(i,e,n){this.exportZip(new Zn,i,e,n)},Fe.exportFileEntry=function(i,e,n,t){this.exportZip(new Ce.FileWriter(i,"application/zip"),e,n,t)},Fe.exportData64URI=function(i,e,n){this.exportZip(new Gn("application/zip"),i,e,n)},Fe.importZip=function(i,e,n){var t=this;Eo(i,function(r){r.getEntries(function(a){a.forEach(function(l){var c=t,h=l.filename.split("/"),g=h.pop();h.forEach(function(v){c=c.getChildByName(v)||new dn(t.fs,v,null,c)}),l.directory||Wt(c,g,{data:l,Reader:Sn})}),e()})},n)},Fe.exportZip=function(i,e,n,t){var r=this;ci(r,function(){Co(i,function(a){(function(l,c,h,g,v){var b=0;(function C(I,f,y,s,d){var x=0;(function w(){var m=f.children[x];m?I.add(m.getFullname(),m.reader,function(){b+=m.uncompressedSize||0,C(I,m,function(){x++,w()},s,d)},function(R){s&&s(b+R,d)},{directory:m.directory,version:m.zipVersion}):y()})()})(l,c,h,g,v)})(a,r,function(){a.close(e)},n,rr(r))},t)},t)},Fe.getChildByName=function(i){var e,n;for(e=0;e<this.children.length;e++)if((n=this.children[e]).name==i)return n},Ar.prototype={remove:function(i){ar(i),this.entries[i.id]=null},find:function(i){var e,n=i.split("/"),t=this.root;for(e=0;t&&e<n.length;e++)t=t.getChildByName(n[e]);return t},getById:function(i){return this.entries[i]},importBlob:function(i,e,n){Rn(this),this.root.importBlob(i,e,n)},importText:function(i,e,n){Rn(this),this.root.importText(i,e,n)},importData64URI:function(i,e,n){Rn(this),this.root.importData64URI(i,e,n)},exportBlob:function(i,e,n){this.root.exportBlob(i,e,n)},exportText:function(i,e,n){this.root.exportText(i,e,n)},exportFileEntry:function(i,e,n,t){this.root.exportFileEntry(i,e,n,t)},exportData64URI:function(i,e,n){this.root.exportData64URI(i,e,n)}},Ce.getMimeType=function(){return"application/octet-stream"};var So={FS:Ar};Ce.useWebWorkers=!1;var ko=(function(){function i(n,t){this.el=n,this.inputEl=t,this.listeners={drop:[],dropstart:[],droperror:[]},this._onDragover=this._onDragover.bind(this),this._onDrop=this._onDrop.bind(this),this._onSelect=this._onSelect.bind(this),n.addEventListener("dragover",this._onDragover,!1),n.addEventListener("drop",this._onDrop,!1),t.addEventListener("change",this._onSelect)}var e=i.prototype;return e.on=function(n,t){return this.listeners[n].push(t),this},e._emit=function(n,t){return this.listeners[n].forEach(function(r){return r(t)}),this},e.destroy=function(){var n=this.el,t=this.inputEl;n.removeEventListener("dragover",this._onDragover,!1),n.removeEventListener("drop",this._onDrop,!1),t.removeEventListener("change",this._onSelect),delete this.el,delete this.inputEl,delete this.listeners},e._onDrop=function(n){n.stopPropagation(),n.preventDefault(),this._emit("dropstart");var t=Array.from(n.dataTransfer.files||[]),r=Array.from(n.dataTransfer.items||[]);if(t.length!==0||r.length!==0)if(r.length>0){var a=r.map(function(l){return l.webkitGetAsEntry()}).filter(function(l){return l!==null});a.length>0&&(a[0].name.match(/\.zip$/)?this._loadZip(r[0].getAsFile()):this._loadNextEntry(new Map,a))}else t.length===1&&t[0].name.match(/\.zip$/)&&this._loadZip(t[0]),this._emit("drop",{files:new Map(t.map(function(l){return[l.name,l]}))});else this._fail("Required drag-and-drop APIs are not supported in this browser.")},e._onDragover=function(n){n.stopPropagation(),n.preventDefault(),n.dataTransfer.dropEffect="copy"},e._onSelect=function(n){this._emit("dropstart");var t=[].slice.call(this.inputEl.files);if(t.length===1&&this._isZip(t[0]))this._loadZip(t[0]);else{var r=new Map;t.forEach(function(a){return r.set(a.webkitRelativePath||a.name,a)}),this._emit("drop",{files:r})}},e._loadNextEntry=function(n,t){var r=this,a=t.pop();if(a)if(a.isFile)a.file(function(c){n.set(a.fullPath,c),r._loadNextEntry(n,t)},function(){return console.error("Could not load file: %s",a.fullPath)});else if(a.isDirectory){var l=a.createReader();l.readEntries(function c(h){h.length?(t=t.concat(h),l.readEntries(c)):r._loadNextEntry(n,t)})}else console.warn("Unknown asset type: "+a.fullPath),this._loadNextEntry(n,t);else this._emit("drop",{files:n})},e._loadZip=function(n){var t=this,r=[],a=new Map,l=new So.FS,c=function h(g){g.directory?g.children.forEach(h):g.name[0]!=="."&&r.push(new Promise(function(v){g.getData(new Ce.BlobWriter,function(b){b.name=g.name,a.set(g.getFullname(),b),v()})}))};l.importBlob(n,function(){c(l.root),Promise.all(r).then(function(){t._emit("drop",{files:a,archive:n})})})},e._isZip=function(n){return n.type==="application/zip"||n.name.match(/\.zip$/)},e._fail=function(n){this._emit("droperror",{message:n})},i})();const Ao={class:"app gallery-viewport"},To={key:0,class:"app-header glass-panel"},Ro={class:"app-header-inner"},Oo={class:"app-title"},Io={class:"wrap"},Do={class:"upload-btn"},Lo={key:2,class:"spinner-overlay"},No={__name:"viewer",setup(i){const e=Lr(),n=ut(yr),t=ut(null),r=ut(null),a=ut(null),l=ut(null),c=ut(!1),h=ut(null),g=on(()=>e.query),v=on(()=>g.value.model?String(g.value.model):""),b=on(()=>({kiosk:!!g.value.kiosk,model:v.value,preset:String(g.value.preset||""),cameraPosition:g.value.cameraPosition?String(g.value.cameraPosition).split(",").map(Number):null})),{viewer:C,createViewer:I}=io(b.value),{createValidator:f}=ao();sr(()=>v.value,(w,m)=>{w&&w!==m&&(c.value=!0,d(w,"",new Map))},{immediate:!1}),Ur(()=>{if(t.value&&r.value){const w=new ko(t.value,r.value);w.on("drop",({files:m})=>s(m)),w.on("dropstart",()=>{c.value=!0}),w.on("droperror",()=>{c.value=!1})}h.value=f(),v.value&&(c.value=!0,d(v.value,"",new Map))});const y=w=>{const m=w.target.files;if(m&&m.length>0){const R=new Map;Array.from(m).forEach(S=>{R.set(S.name,S)}),s(R)}},s=w=>{let m,R;if(Array.from(w).forEach(([S,E])=>{E.name.match(/\.(gltf|glb)$/)&&(m=E,R=S.replace(E.name,""))}),!m){x("No .gltf or .glb asset found.");return}d(m,R,w)},d=async(w,m,R)=>{if(C.value)C.value.clear();else{if(l.value=document.createElement("div"),l.value.classList.add("viewer"),await Mr(),a.value)a.value.innerHTML="",a.value.appendChild(l.value);else{const U=document.querySelector(".wrap");if(U){const q=document.createElement("div");q.className="viewer-wrapper",q.appendChild(l.value),U.appendChild(q)}}C.value=I(l.value)}const S=typeof w=="string"?w:URL.createObjectURL(w),E=()=>{c.value=!1,typeof w=="object"&&URL.revokeObjectURL(S)};c.value=!0;try{console.log("Loading model:",S);const U=await C.value.load(S,m,R);console.log("Model loaded successfully:",U),E()}catch(U){console.error("Error loading model:",U),x(U),E()}},x=w=>{let m=(w||{}).message||w.toString();m.match(/ProgressEvent/)?m="Unable to retrieve this file. Check JS console and browser network tab.":m.match(/Unexpected token/)?m=`Unable to parse file content. Verify that this file is valid. Error: "${m}"`:w&&w.target&&w.target instanceof Image&&(m="Missing texture: "+w.target.src.split("/").pop()),window.alert(m),console.error(w),c.value=!1};return(w,m)=>(St(),Ft("div",Ao,[b.value.kiosk?jt("",!0):(St(),Ft("header",To,[We("div",Ro,[We("h1",Oo,or(n.value),1)])])),We("main",Io,[l.value?jt("",!0):(St(),Ft("div",{key:0,class:"dropzone",ref_key:"dropzoneEl",ref:t},[m[1]||(m[1]=We("div",{class:"placeholder glass-panel"},[We("p",{class:"placeholder-title"},"3D Gallery"),We("p",{class:"placeholder-desc"},"Drag glTF 2.0 file or folder here")],-1)),We("div",Do,[We("input",{type:"file",name:"file-input[]",id:"file-input",ref_key:"inputEl",ref:r,multiple:"",onChange:y},null,544),m[0]||(m[0]=We("label",{for:"file-input",class:"upload-button"},[We("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",viewBox:"0 0 20 17"},[We("path",{d:"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"})]),We("span",null,"Choose file")],-1))])],512)),l.value?(St(),Ft("div",{key:1,ref_key:"viewerContainer",ref:a,class:"viewer-wrapper"},null,512)):jt("",!0),c.value?(St(),Ft("div",Lo,[...m[2]||(m[2]=[We("div",{class:"spinner-modern"},null,-1),We("p",{class:"spinner-text"},"Loading model...",-1)])])):jt("",!0),h.value?(St(),Pr(co,{key:3,validator:h.value},null,8,["validator"])):jt("",!0)])]))}};export{No as default};
